{"singlePage": ["link", "about"], "startSite": "06/20/2024", "filingNum": "\u5180ICP\u59072022019998\u53f7", "onePageListNum": 15, "commentLabelColor": "#006b75", "yearColorList": ["#bc4c00", "#0969da", "#1f883d", "#A333D0"], "i18n": "CN", "themeMode": "manual", "dayTheme": "light", "nightTheme": "dark", "urlMode": "pinyin", "script": "<script defer src=\"http://ssh.witter.top:10012/script.js\" data-website-id=\"b891c729-62b4-46cb-bdca-d622dc706106\"></script>", "style": "", "head": "", "indexScript": "", "indexStyle": "", "bottomText": "\ud83c\udf7a\u8f6c\u8f7d\u6587\u7ae0\u8bf7\u6ce8\u660e\u51fa\u5904\uff0c\u8c22\u8c22\uff01\ud83c\udf7a", "showPostSource": 1, "iconList": {"photo": "M16 13.25A1.75 1.75 0 0 1 14.25 15H1.75A1.75 1.75 0 0 1 0 13.25V2.75C0 1.784.784 1 1.75 1h12.5c.966 0 1.75.784 1.75 1.75ZM1.75 2.5a.25.25 0 0 0-.25.25v10.5c0 .138.112.25.25.25h.94l.03-.03 6.077-6.078a1.75 1.75 0 0 1 2.412-.06L14.5 10.31V2.75a.25.25 0 0 0-.25-.25Zm12.5 11a.25.25 0 0 0 .25-.25v-.917l-4.298-3.889a.25.25 0 0 0-.344.009L4.81 13.5ZM7 6a2 2 0 1 1-3.999.001A2 2 0 0 1 7 6ZM5.5 6a.5.5 0 1 0-1 0 .5.5 0 0 0 1 0Z"}, "UTC": 8, "rssSplit": "sentence", "exlink": {"photo": "https://img.witter.top"}, "needComment": 1, "allHead": "", "title": "V's Blog", "subTitle": "\u81ea\u6709\u6e05\u98ce\u5e38\u8f7d\u9e64\uff0c\u4ece\u65e0\u731c\u610f\u4e0d\u60ca\u9e25\u3002", "avatarUrl": "https://img.witter.top/file/b037878209903b7d5bb17.jpg", "GMEEK_VERSION": "last", "homeUrl": "https://blog.witter.top", "postListJson": {"P13": {"htmlDir": "docs/post/ni-jue-de-zhe-shi-shen-me-jiu-shi-shen-me.html", "labels": ["good first issue"], "postTitle": "\u4f60\u89c9\u5f97\u8fd9\u662f\u4ec0\u4e48\u5c31\u662f\u4ec0\u4e48", "postUrl": "post/ni-jue-de-zhe-shi-shen-me-jiu-shi-shen-me.html", "postSourceUrl": "https://github.com/ljwtorch/ljwtorch.github.io/issues/13", "commentNum": 0, "wordCount": 105, "description": "[image](https://www.3mz.cloudns.ch/file/8859a6285fa21a73afc4c.jpg)\r\n<!-- ##{'timestamp':1705817030}## -->\u3002", "top": 0, "createdAt": 1705817030, "style": "", "script": "<script defer src=\"http://ssh.witter.top:10012/script.js\" data-website-id=\"b891c729-62b4-46cb-bdca-d622dc706106\"></script>", "head": "", "ogImage": "https://img.witter.top/file/b037878209903b7d5bb17.jpg", "createdDate": "2024-01-21", "dateLabelColor": "#bc4c00"}, "P16": {"htmlDir": "docs/post/Python -xiao-ji.html", "labels": ["lang"], "postTitle": "Python \u5c0f\u8bb0", "postUrl": "post/Python%20-xiao-ji.html", "postSourceUrl": "https://github.com/ljwtorch/ljwtorch.github.io/issues/16", "commentNum": 0, "wordCount": 24581, "description": "## 1.\u521d\u8bc6Python\r\n\r\n1989 \u5e74\uff0c\u4f5c\u8005\u51b3\u5fc3\u5f00\u53d1\u4e00\u4e2a\u65b0\u7684\u89e3\u91ca\u7a0b\u5e8f\r\n\r\n1991\u5e74\uff0c\u7b2c\u4e00\u4e2aPython\u89e3\u91ca\u5668\u8bde\u751f\r\n\r\n## 2.\u5b89\u88c5Python\r\n\r\n\u5b98\u7f51\u4e0b\u8f7d\uff1ahttps://www.python.org/downloads/\r\n\r\n- \u6dfb\u52a0\u5230path\r\n- \u4fee\u6539\u9ed8\u8ba4\u8def\u5f84\r\n\r\ncmd \u8f93\u5165python\r\n\r\n```shell\r\nC:\\Users\\Lenovo>python\r\nPython 3.10.6 (tags/v3.10.6:9c7b4bd, Aug  1 2022, 21:53:49) [MSC v.1932 64 bit (AMD64)] on win32\r\nType 'help', 'copyright', 'credits' or 'license' for more information.\r\n>>>\r\n```\r\n\r\n**Python\u89e3\u91ca\u5668**\uff1a\u7528\u6765\u7ffb\u8bd1Python\u4ee3\u7801\uff0c\u5e76\u63d0\u4ea4\u7ed9\u8ba1\u7b97\u673a\u6267\u884c\u3002", "top": 0, "createdAt": 1717068447, "style": "", "script": "<script defer src=\"http://ssh.witter.top:10012/script.js\" data-website-id=\"b891c729-62b4-46cb-bdca-d622dc706106\"></script>", "head": "", "ogImage": "https://img.witter.top/file/b037878209903b7d5bb17.jpg", "createdDate": "2024-05-30", "dateLabelColor": "#bc4c00"}, "P1": {"htmlDir": "docs/post/V's first.html", "labels": ["bug"], "postTitle": "V's first", "postUrl": "post/V%27s%20first.html", "postSourceUrl": "https://github.com/ljwtorch/ljwtorch.github.io/issues/1", "commentNum": 0, "wordCount": 822, "description": "> \u6240\u505a\u7559\u4e0b\u75d5\u8ff9\r\n\r\n```\r\n> [!NOTE]\r\n> Useful information that users should know, even when skimming content.\r\n\r\n> [!TIP]\r\n> Helpful advice for doing things better or more easily.\r\n\r\n> [!IMPORTANT]\r\n> Key information users need to know to achieve their goal.\r\n\r\n> [!WARNING]\r\n> Urgent info that needs immediate user attention to avoid problems.\r\n\r\n> [!CAUTION]\r\n> Advises about risks or negative outcomes of certain actions.\r\n```\r\n\r\n> [!NOTE]\r\n> Useful information that users should know, even when skimming content.\r\n\r\n> [!TIP]\r\n> Helpful advice for doing things better or more easily.\r\n\r\n> [!IMPORTANT]\r\n> Key information users need to know to achieve their goal.\r\n\r\n> [!WARNING]\r\n> Urgent info that needs immediate user attention to avoid problems.\r\n\r\n> [!CAUTION]\r\n> Advises about risks or negative outcomes of certain actions.\u3002", "top": 0, "createdAt": 1718849942, "style": "<style>.markdown-alert{padding:0.5rem 1rem;margin-bottom:1rem;border-left:.25em solid var(--borderColor-default,var(--color-border-default));}.markdown-alert .markdown-alert-title {display:flex;font-weight:var(--base-text-weight-medium,500);align-items:center;line-height:1;}.markdown-alert>:first-child {margin-top:0;}.markdown-alert>:last-child {margin-bottom:0;}</style><style>.markdown-alert.markdown-alert-note {border-left-color:var(--borderColor-accent-emphasis, var(--color-accent-emphasis));background-color:var(--color-accent-subtle);}.markdown-alert.markdown-alert-note .markdown-alert-title {color: var(--fgColor-accent,var(--color-accent-fg));}</style><style>.markdown-alert.markdown-alert-tip {border-left-color:var(--borderColor-success-emphasis, var(--color-success-emphasis));background-color:var(--color-success-subtle);}.markdown-alert.markdown-alert-tip .markdown-alert-title {color: var(--fgColor-success,var(--color-success-fg));}</style><style>.markdown-alert.markdown-alert-important {border-left-color:var(--borderColor-done-emphasis, var(--color-done-emphasis));background-color:var(--color-done-subtle);}.markdown-alert.markdown-alert-important .markdown-alert-title {color: var(--fgColor-done,var(--color-done-fg));}</style><style>.markdown-alert.markdown-alert-warning {border-left-color:var(--borderColor-attention-emphasis, var(--color-attention-emphasis));background-color:var(--color-attention-subtle);}.markdown-alert.markdown-alert-warning .markdown-alert-title {color: var(--fgColor-attention,var(--color-attention-fg));}</style><style>.markdown-alert.markdown-alert-caution {border-left-color:var(--borderColor-danger-emphasis, var(--color-danger-emphasis));background-color:var(--color-danger-subtle);}.markdown-alert.markdown-alert-caution .markdown-alert-title {color: var(--fgColor-danger,var(--color-danger-fg));}</style>", "script": "<script defer src=\"http://ssh.witter.top:10012/script.js\" data-website-id=\"b891c729-62b4-46cb-bdca-d622dc706106\"></script>", "head": "", "ogImage": "https://img.witter.top/file/b037878209903b7d5bb17.jpg", "createdDate": "2024-06-20", "dateLabelColor": "#bc4c00"}, "P2": {"htmlDir": "docs/post/Certbot -shen-qing-SSL-zheng-shu.html", "labels": ["\u8bc1\u4e66"], "postTitle": "Certbot \u7533\u8bf7SSL\u8bc1\u4e66", "postUrl": "post/Certbot%20-shen-qing-SSL-zheng-shu.html", "postSourceUrl": "https://github.com/ljwtorch/ljwtorch.github.io/issues/2", "commentNum": 0, "wordCount": 2083, "description": "## \u5b98\u65b9\u7f51\u5740\r\n\r\nhttps://certbot.eff.org/\r\n\r\n## \u7533\u8bf7SSL\u8bc1\u4e66\r\n\r\n> \u6307\u5b9aNginx\u8def\u5f84\u65b9\u6cd5\uff1a\r\n>\r\n> \u65b9\u5f0f1\uff1a certbot --nginx    (\u5f53linux\u6709\u591a\u4e2a\u7248\u672cnginx\uff0c\u4f1a\u51fa\u73b0\u627e\u9519nginx\u7684\u914d\u7f6e\u6587\u4ef6\u8def\u5f84)\r\n>\r\n> \u65b9\u5f0f2\uff1a certbot --nginx-server-root  /usr/local/nginx/conf    (\u6307\u5b9anginx\u7684\u914d\u7f6e\u6587\u4ef6\u8def\u5f84)\r\n\r\n1. \u4e3a\u5355\u57df\u540d\u7533\u8bf7SSL\u8bc1\u4e66\r\n\r\n   ```shell\r\n   # \u5b89\u88c5 certbot \u4ee5\u53ca certbot nginx \u63d2\u4ef6\r\n   sudo yum install certbot python2-certbot-nginx -y\r\n   \r\n   # \u6267\u884c\u914d\u7f6e\uff0c\u4e2d\u9014\u4f1a\u8be2\u95ee\u4f60\u7684\u90ae\u7bb1\uff0c\u5982\u5b9e\u586b\u5199\u5373\u53ef\r\n   sudo certbot --nginx\r\n   \r\n   # \u81ea\u52a8\u7eed\u7ea6\r\n   sudo certbot renew --dry-run\r\n   \r\n   # \u83b7\u5f97\u5e76\u5b89\u88c5\u4e00\u4e2a\u8bc1\u4e66\u3002", "top": 0, "createdAt": 1718851464, "style": "", "script": "<script defer src=\"http://ssh.witter.top:10012/script.js\" data-website-id=\"b891c729-62b4-46cb-bdca-d622dc706106\"></script>", "head": "", "ogImage": "https://img.witter.top/file/b037878209903b7d5bb17.jpg", "createdDate": "2024-06-20", "dateLabelColor": "#bc4c00"}, "P3": {"htmlDir": "docs/post/Azkaban.html", "labels": ["\u5927\u6570\u636e"], "postTitle": "Azkaban", "postUrl": "post/Azkaban.html", "postSourceUrl": "https://github.com/ljwtorch/ljwtorch.github.io/issues/3", "commentNum": 0, "wordCount": 5553, "description": "## 1.\u90e8\u7f72\r\n\r\n### 1.1 Solo\r\n\r\n\u72ec\u7acb\u670d\u52a1\u5668\u662fAzkaban\u7684\u72ec\u7acb\u5b9e\u4f8b\uff0c\u4e5f\u662f\u6700\u7b80\u5355\u7684\u5f00\u59cb\u3002", "top": 0, "createdAt": 1718851638, "style": "", "script": "<script defer src=\"http://ssh.witter.top:10012/script.js\" data-website-id=\"b891c729-62b4-46cb-bdca-d622dc706106\"></script>", "head": "", "ogImage": "https://img.witter.top/file/b037878209903b7d5bb17.jpg", "createdDate": "2024-06-20", "dateLabelColor": "#bc4c00"}, "P4": {"htmlDir": "docs/post/EFK-ri-zhi-xi-tong.html", "labels": ["\u5bb9\u5668", "\u65e5\u5fd7"], "postTitle": "EFK\u65e5\u5fd7\u7cfb\u7edf", "postUrl": "post/EFK-ri-zhi-xi-tong.html", "postSourceUrl": "https://github.com/ljwtorch/ljwtorch.github.io/issues/4", "commentNum": 0, "wordCount": 16169, "description": "**\u6ce8\uff1a\u73b0\u5728\u65b0\u7248\u672celastic stack\u5df2\u7ecf\u652f\u6301\u5c06kafka\u4f5c\u4e3a\u8f93\u51fa\u548c\u8f93\u5165\u7684\u76ee\u6807**\r\n\r\n\u5f53\u65e5\u5fd7\u4e0d\u662f\u7ed3\u6784\u5316\u6570\u636e\uff1a*.log->filebeat->kafka->logstash->elasticsearch\r\n\r\n\u5f53\u65e5\u5fd7\u662f\u7ed3\u6784\u5316\u6570\u636e\uff1a*.log->filebeat->kafka->filebeat->elasticsearch\r\n\r\n\u533a\u522b\u5728\u4e8e\u662f\u5426\u9700\u8981logstash\u8fdb\u884c\u65e5\u5fd7\u7684\u8fc7\u6ee4\u548c\u7ed3\u6784\u5316\uff1b\r\n\r\n## \u7ed3\u6784\u5316\u65e5\u5fd7\r\n\r\n**\u8fde\u63a5\u793a\u4f8b\u914d\u7f6e\u6587\u4ef6**\r\n\r\n### filebeat 1\r\n\r\n> \u6b64filebeat\u5b9e\u4f8b\u4e3a\u65e5\u5fd7\u91c7\u96c6\u7aef\uff0c\u5373kafka\u751f\u4ea7\u8005\uff0c\u53ef\u4ee5\u6709\u591a\u4e2a\u5b9e\u4f8b\u8fdb\u884c\u91c7\u96c6\r\n\r\n```yaml\r\nfilebeat.inputs:\r\n- type: filestream #\u65b0\u7248\u672c\u5e38\u7528\u6587\u4ef6\u6d41\u8f93\u5165\u65b9\u5f0f\r\n  id: my-filestream-id #\u6bcf\u4e2a\u6587\u4ef6\u6d41\u8f93\u5165\u5fc5\u987b\u6709\u4e00\u4e2a\u552f\u4e00\u7684 ID\u3002", "top": 1, "createdAt": 1718853988, "style": "<style>.markdown-alert{padding:0.5rem 1rem;margin-bottom:1rem;border-left:.25em solid var(--borderColor-default,var(--color-border-default));}.markdown-alert .markdown-alert-title {display:flex;font-weight:var(--base-text-weight-medium,500);align-items:center;line-height:1;}.markdown-alert>:first-child {margin-top:0;}.markdown-alert>:last-child {margin-bottom:0;}</style><style>.markdown-alert.markdown-alert-tip {border-left-color:var(--borderColor-success-emphasis, var(--color-success-emphasis));background-color:var(--color-success-subtle);}.markdown-alert.markdown-alert-tip .markdown-alert-title {color: var(--fgColor-success,var(--color-success-fg));}</style>", "script": "<script defer src=\"http://ssh.witter.top:10012/script.js\" data-website-id=\"b891c729-62b4-46cb-bdca-d622dc706106\"></script>", "head": "", "ogImage": "https://img.witter.top/file/b037878209903b7d5bb17.jpg", "createdDate": "2024-06-20", "dateLabelColor": "#bc4c00"}, "P5": {"htmlDir": "docs/post/CloudFlare-da-jian-Docker-jing-xiang-yuan.html", "labels": ["\u5bb9\u5668"], "postTitle": "CloudFlare\u642d\u5efaDocker\u955c\u50cf\u6e90", "postUrl": "post/CloudFlare-da-jian-Docker-jing-xiang-yuan.html", "postSourceUrl": "https://github.com/ljwtorch/ljwtorch.github.io/issues/5", "commentNum": 0, "wordCount": 1923, "description": "> [\u793a\u4f8b\u7f51\u7ad9](https://docker.3mz.cloudns.ch/) \u4f7f\u7528\u7684 [\u6559\u7a0b](https://blog.lty520.faith/%E5%8D%9A%E6%96%87/%E8%87%AA%E5%BB%BAdocker-hub%E5%8A%A0%E9%80%9F%E9%95%9C%E5%83%8F) \u548c [\u4ed3\u5e93](https://github.com/Doublemine/container-registry-worker)\uff0c\u5bf9\u4ed3\u5e93\u4ee3\u7801\u8fdb\u884c\u4e86\u90e8\u5206\u81ea\u5b9a\u4e49\u4fee\u6539\r\n\r\n`docker.ts`\r\n\r\n```typescript\r\nimport HTML from './docker.html';\r\n\r\nexport default {\r\n  async fetch(request: Request): Promise<Response> {\r\n    const url = new URL(request.url);\r\n    const path = url.pathname;\r\n    const originalHost = request.headers.get('host');\r\n    const registryHost = 'registry-1.docker.io';\r\n\r\n    if (path.startsWith('/v2/')) {\r\n      const headers = new Headers(request.headers);\r\n      headers.set('host', registryHost);\r\n\r\n      const registryUrl = `https://${registryHost}${path}`;\r\n      const registryRequest = new Request(registryUrl, {\r\n        method: request.method,\r\n        headers: headers,\r\n        body: request.body,\r\n        redirect: 'follow', // \u6309\u7167\u6559\u7a0b\u4fee\u6539\u4e86\u8fd9\u4e00\u884c\r\n      });\r\n\r\n      const registryResponse = await fetch(registryRequest);\r\n\r\n      const responseHeaders = new Headers(registryResponse.headers);\r\n      responseHeaders.set('access-control-allow-origin', originalHost as string);\r\n      responseHeaders.set('access-control-allow-headers', 'Authorization');\r\n      return new Response(registryResponse.body, {\r\n        status: registryResponse.status,\r\n        statusText: registryResponse.statusText,\r\n        headers: responseHeaders,\r\n      });\r\n    } else {\r\n      return new Response(HTML.replace(/{{host}}/g, originalHost as string), {\r\n        status: 200,\r\n        headers: {\r\n          'content-type': 'text/html'\r\n        }\r\n      });\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n## \u5982\u4f55\u90e8\u7f72\r\n\r\n```shell\r\n# \u4f7f\u7528wrangler\r\nwrangler publish --config wrangler-dockerhub.toml\r\n```\r\n\r\n## \u5982\u4f55\u81ea\u5b9a\u4e49\u57df\u540d\r\n\r\n\u8bbf\u95eeCloudFlare\u540e\u53f0 -> Workers\u548cPages -> \u8fdb\u5165\u9700\u8981\u81ea\u5b9a\u4e49\u7684Worker -> \u8bbe\u7f6e -> \u89e6\u53d1\u5668 -> \u81ea\u5b9a\u4e49\u57df\r\n\r\n![image-20240620140432250](https://img.witter.top/file/519f26de32e9f4b53cc3b.png)\u3002", "top": 1, "createdAt": 1718863528, "style": "", "script": "<script defer src=\"http://ssh.witter.top:10012/script.js\" data-website-id=\"b891c729-62b4-46cb-bdca-d622dc706106\"></script>", "head": "", "ogImage": "https://img.witter.top/file/b037878209903b7d5bb17.jpg", "createdDate": "2024-06-20", "dateLabelColor": "#bc4c00"}, "P6": {"htmlDir": "docs/post/Hadoop.html", "labels": ["\u5927\u6570\u636e"], "postTitle": "Hadoop", "postUrl": "post/Hadoop.html", "postSourceUrl": "https://github.com/ljwtorch/ljwtorch.github.io/issues/6", "commentNum": 0, "wordCount": 13939, "description": "\r\n## 1.Hadoop\u6982\u8ff0\r\n\r\n**\u6838\u5fc3\u7ec4\u4ef6**\r\n\r\n**HDFS**\uff08\u5206\u5e03\u5f0f\u6587\u4ef6\u7cfb\u7edf\uff09\uff1a\u89e3\u51b3\u6d77\u91cf\u6570\u636e\u5b58\u50a8\r\n\r\n**YARN**\uff08\u4f5c\u4e1a\u8c03\u5ea6\u548c\u96c6\u7fa4\u8d44\u6e90\u7ba1\u7406\u7684\u6846\u67b6\uff09\uff1a\u89e3\u51b3\u8d44\u6e90\u4efb\u52a1\u8c03\u5ea6\r\n\r\n**MAPREDUCE**\uff08\u5206\u5e03\u5f0f\u8fd0\u7b97\u7f16\u7a0b\u6846\u67b6\uff09\uff1a\u89e3\u51b3\u6d77\u91cf\u6570\u636e\u8ba1\u7b97\r\n\r\n**\u5176\u4ed6\u6846\u67b6**\r\n\r\n| **\u6846\u67b6**  | **\u7528\u9014**                                                  |\r\n| --------- | --------------------------------------------------------- |\r\n| HDFS      | \u5206\u5e03\u5f0f\u6587\u4ef6\u7cfb\u7edf                                            |\r\n| MapReduce | \u5206\u5e03\u5f0f\u8fd0\u7b97\u7a0b\u5e8f\u5f00\u53d1\u6846\u67b6                                    |\r\n| ZooKeeper | \u5206\u5e03\u5f0f\u534f\u8c03\u670d\u52a1\u57fa\u7840\u7ec4\u4ef6                                    |\r\n| HIVE      | \u57fa\u4e8eHADOOP\u7684\u5206\u5e03\u5f0f\u6570\u636e\u4ed3\u5e93\uff0c\u63d0\u4f9b\u57fa\u4e8eSQL\u7684\u67e5\u8be2\u6570\u636e\u64cd\u4f5c     |\r\n| FLUME     | \u65e5\u5fd7\u6570\u636e\u91c7\u96c6\u6846\u67b6                                          |\r\n| oozie     | \u5de5\u4f5c\u6d41\u8c03\u5ea6\u6846\u67b6                                            |\r\n| Sqoop     | \u6570\u636e\u5bfc\u5165\u5bfc\u51fa\u5de5\u5177\uff08\u6bd4\u5982\u7528\u4e8emysql\u548cHDFS\u4e4b\u95f4\uff09               |\r\n| Impala    | \u57fa\u4e8ehive\u7684\u5b9e\u65f6sql\u67e5\u8be2\u5206\u6790                                 |\r\n| Mahout    | \u57fa\u4e8emapreduce/spark/flink\u7b49\u5206\u5e03\u5f0f\u8fd0\u7b97\u6846\u67b6\u7684\u673a\u5668\u5b66\u4e60\u7b97\u6cd5\u5e93 |\r\n\r\n**\u9ed8\u8ba4\u7aef\u53e3\u66f4\u6539**\r\n\r\n1. \u5728hadoop3.x\u4e4b\u524d\uff0c\u591a\u4e2aHadoop\u670d\u52a1\u7684\u9ed8\u8ba4\u7aef\u53e3\u90fd\u5c5e\u4e8eLinux\u7684\u4e34\u65f6\u7aef\u53e3\u8303\u56f4\uff0832768-61000\uff09\u3002", "top": 0, "createdAt": 1718890527, "style": "", "script": "<script defer src=\"http://ssh.witter.top:10012/script.js\" data-website-id=\"b891c729-62b4-46cb-bdca-d622dc706106\"></script>", "head": "", "ogImage": "https://img.witter.top/file/b037878209903b7d5bb17.jpg", "createdDate": "2024-06-20", "dateLabelColor": "#bc4c00"}, "P7": {"htmlDir": "docs/post/Helm -an-zhuang.html", "labels": ["K8S", "\u5bb9\u5668"], "postTitle": "Helm \u5b89\u88c5", "postUrl": "post/Helm%20-an-zhuang.html", "postSourceUrl": "https://github.com/ljwtorch/ljwtorch.github.io/issues/7", "commentNum": 0, "wordCount": 3136, "description": "[\u5b98\u65b9\u6587\u6863](https://helm.sh/zh/docs/intro/install/)\r\n\r\n### \u7528\u4e8c\u8fdb\u5236\u7248\u672c\u5b89\u88c5\r\n\r\n\u6bcf\u4e2aHelm [[\u7248\u672c](https://github.com/helm/helm/releases)](https://github.com/helm/helm/releases)\u90fd\u63d0\u4f9b\u4e86\u5404\u79cd\u64cd\u4f5c\u7cfb\u7edf\u7684\u4e8c\u8fdb\u5236\u7248\u672c\uff0c\u8fd9\u4e9b\u7248\u672c\u53ef\u4ee5\u624b\u52a8\u4e0b\u8f7d\u548c\u5b89\u88c5\u3002", "top": 0, "createdAt": 1718890596, "style": "", "script": "<script defer src=\"http://ssh.witter.top:10012/script.js\" data-website-id=\"b891c729-62b4-46cb-bdca-d622dc706106\"></script>", "head": "", "ogImage": "https://img.witter.top/file/b037878209903b7d5bb17.jpg", "createdDate": "2024-06-20", "dateLabelColor": "#bc4c00"}, "P8": {"htmlDir": "docs/post/Linux -gong-ju.html", "labels": ["Linux"], "postTitle": "Linux \u5de5\u5177", "postUrl": "post/Linux%20-gong-ju.html", "postSourceUrl": "https://github.com/ljwtorch/ljwtorch.github.io/issues/8", "commentNum": 0, "wordCount": 7329, "description": "# Linux\u5de5\u5177\r\n\r\n## psmisc\r\n\r\npsmisc \u662f\u4e00\u4e2a Linux \u5de5\u5177\u96c6\uff0c\u5b83\u63d0\u4f9b\u4e86\u4e00\u4e9b\u7ba1\u7406\u548c\u76d1\u89c6\u8fdb\u7a0b\u7684\u5b9e\u7528\u5de5\u5177\u3002", "top": 0, "createdAt": 1718891479, "style": "", "script": "<script defer src=\"http://ssh.witter.top:10012/script.js\" data-website-id=\"b891c729-62b4-46cb-bdca-d622dc706106\"></script>", "head": "", "ogImage": "https://img.witter.top/file/b037878209903b7d5bb17.jpg", "createdDate": "2024-06-20", "dateLabelColor": "#bc4c00"}, "P9": {"htmlDir": "docs/post/Kubernetes.html", "labels": ["Linux", "K8S"], "postTitle": "Kubernetes", "postUrl": "post/Kubernetes.html", "postSourceUrl": "https://github.com/ljwtorch/ljwtorch.github.io/issues/9", "commentNum": 0, "wordCount": 30953, "description": "## \u5b89\u88c5\r\n\r\n### \u8f6c\u53d1 IPv4 \u5e76\u8ba9 iptables \u770b\u5230\u6865\u63a5\u6d41\u91cf\r\n\r\n```shell\r\ncat <<EOF | sudo tee /etc/modules-load.d/k8s.conf\r\noverlay\r\nbr_netfilter\r\nEOF\r\n\r\nsudo modprobe overlay\r\nsudo modprobe br_netfilter\r\n\r\n# \u8bbe\u7f6e\u6240\u9700\u7684 sysctl \u53c2\u6570\uff0c\u53c2\u6570\u5728\u91cd\u65b0\u542f\u52a8\u540e\u4fdd\u6301\u4e0d\u53d8\r\ncat <<EOF | sudo tee /etc/sysctl.d/k8s.conf\r\nnet.bridge.bridge-nf-call-iptables  = 1\r\nnet.bridge.bridge-nf-call-ip6tables = 1\r\nnet.ipv4.ip_forward                 = 1\r\nEOF\r\n\r\n# \u5e94\u7528 sysctl \u53c2\u6570\u800c\u4e0d\u91cd\u65b0\u542f\u52a8\r\nsudo sysctl --system\r\n```\r\n\r\n\u901a\u8fc7\u8fd0\u884c\u4ee5\u4e0b\u6307\u4ee4\u786e\u8ba4 `br_netfilter` \u548c `overlay` \u6a21\u5757\u88ab\u52a0\u8f7d\uff1a\r\n\r\n```bash\r\nlsmod | grep br_netfilter\r\nlsmod | grep overlay\r\n```\r\n\r\n\u901a\u8fc7\u8fd0\u884c\u4ee5\u4e0b\u6307\u4ee4\u786e\u8ba4 `net.bridge.bridge-nf-call-iptables`\u3001`net.bridge.bridge-nf-call-ip6tables` \u548c `net.ipv4.ip_forward` \u7cfb\u7edf\u53d8\u91cf\u5728\u4f60\u7684 `sysctl` \u914d\u7f6e\u4e2d\u88ab\u8bbe\u7f6e\u4e3a 1\uff1a\r\n\r\n```bash\r\nsysctl net.bridge.bridge-nf-call-iptables net.bridge.bridge-nf-call-ip6tables net.ipv4.ip_forward\r\n```\r\n\r\n### \u4e34\u65f6\u5173\u95edswap\u5206\u533a\r\n\r\n```shell\r\nsudo swapoff -a\r\n# Debian\u6c38\u4e45\u5173\u95ed\r\nsystemctl --type swap --all\r\nsystemctl mask dev-xxx.swap\r\n```\r\n\r\n### \u914d\u7f6ecgroup\u9a71\u52a8\r\n\r\n```shell\r\n# \u5907\u4efd/etc/containerd/config.toml\r\ncontainerd config default > /etc/containerd/config.toml\r\n\r\nSystemdCgroup = true\r\n\r\n[plugins.'io.containerd.grpc.v1.cri']\r\n  sandbox_image = 'registry.aliyuncs.com/google_containers/pause:3.6'\r\n```\r\n\r\n### \u5b89\u88c5 kubeadm\u3001kubelet \u548c kubectl\r\n\r\n```shell\r\n# \u57fa\u4e8eRed Hat\u7684\u53d1\u884c\u7248\r\n# \u5c06 SELinux \u8bbe\u7f6e\u4e3a permissive \u6a21\u5f0f\uff08\u76f8\u5f53\u4e8e\u5c06\u5176\u7981\u7528\uff09\r\nsudo setenforce 0\r\nsudo sed -i 's/^SELINUX=enforcing$/SELINUX=permissive/' /etc/selinux/config\r\n\r\n# \u6b64\u64cd\u4f5c\u4f1a\u8986\u76d6 /etc/yum.repos.d/kubernetes.repo \u4e2d\u73b0\u5b58\u7684\u6240\u6709\u914d\u7f6e\r\ncat > /etc/yum.repos.d/kubernetes.repo << EOF\r\n[kubernetes]\r\nname=Kubernetes\r\nbaseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64\r\nenabled=1\r\ngpgcheck=0\r\nrepo_gpgcheck=0\r\ngpgkey=https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg\r\nEOF\r\n\r\nsudo yum install -y kubelet kubeadm kubectl --disableexcludes=kubernetes\r\nsudo systemctl enable --now kubelet\r\n\r\n# \u57fa\u4e8eDebian\u7684\u53d1\u884c\u7248\r\nsudo apt-get update\r\n# apt-transport-https \u53ef\u80fd\u662f\u4e00\u4e2a\u865a\u62df\u5305\uff08dummy package\uff09\uff1b\u5982\u679c\u662f\u7684\u8bdd\uff0c\u4f60\u53ef\u4ee5\u8df3\u8fc7\u5b89\u88c5\u8fd9\u4e2a\u5305\r\nsudo apt-get install -y apt-transport-https ca-certificates curl\r\n\r\ncurl -fsSL https://pkgs.k8s.io/core:/stable:/v1.28/deb/Release.key | sudo gpg --dearmor -o /etc/apt/keyrings/kubernetes-apt-keyring.gpg\r\n\r\necho 'deb [signed-by=/etc/apt/keyrings/kubernetes-apt-keyring.gpg] https://pkgs.k8s.io/core:/stable:/v1.28/deb/ /' | sudo tee /etc/apt/sources.list.d/kubernetes.list\r\n\r\nsudo apt-get update\r\nsudo apt-get install -y kubelet kubeadm kubectl\r\nsudo apt-mark hold kubelet kubeadm kubectl\r\n```\r\n\r\n### \u6dfb\u52a0\u6307\u4ee4\u8865\u5168\r\n\r\n```shell\r\nsudo apt-get install bash-completion\r\necho 'source <(kubectl completion bash)' >> ~/.bashrc\r\nsource ~/.bashrc\r\ncat ~/.bashrc\r\n```\r\n\r\n\r\n\r\n### \u521d\u59cb\u5316Master\u8282\u70b9\r\n\r\n\u63a7\u5236\u5e73\u9762\u8282\u70b9\u662f\u8fd0\u884c\u63a7\u5236\u5e73\u9762\u7ec4\u4ef6\u7684\u673a\u5668\uff0c \u5305\u62ec etcd\uff08\u96c6\u7fa4\u6570\u636e\u5e93\uff09 \u548c API \u670d\u52a1\u5668 \uff08\u547d\u4ee4\u884c\u5de5\u5177 kubectl \u4e0e\u4e4b\u901a\u4fe1\uff09\u3002", "top": 0, "createdAt": 1718893152, "style": "", "script": "<script defer src=\"http://ssh.witter.top:10012/script.js\" data-website-id=\"b891c729-62b4-46cb-bdca-d622dc706106\"></script>", "head": "", "ogImage": "https://img.witter.top/file/b037878209903b7d5bb17.jpg", "createdDate": "2024-06-20", "dateLabelColor": "#bc4c00"}, "P10": {"htmlDir": "docs/post/Logrotate.html", "labels": ["Linux"], "postTitle": "Logrotate", "postUrl": "post/Logrotate.html", "postSourceUrl": "https://github.com/ljwtorch/ljwtorch.github.io/issues/10", "commentNum": 0, "wordCount": 9129, "description": "logrotate \u662f\u4e00\u4e2a linux \u7cfb\u7edf\u65e5\u5fd7\u7684\u7ba1\u7406\u5de5\u5177\u3002", "top": 0, "createdAt": 1718893645, "style": "", "script": "<script defer src=\"http://ssh.witter.top:10012/script.js\" data-website-id=\"b891c729-62b4-46cb-bdca-d622dc706106\"></script>", "head": "", "ogImage": "https://img.witter.top/file/b037878209903b7d5bb17.jpg", "createdDate": "2024-06-20", "dateLabelColor": "#bc4c00"}, "P11": {"htmlDir": "docs/post/Openssl -sheng-ji.html", "labels": ["Linux"], "postTitle": "Openssl \u5347\u7ea7", "postUrl": "post/Openssl%20-sheng-ji.html", "postSourceUrl": "https://github.com/ljwtorch/ljwtorch.github.io/issues/11", "commentNum": 0, "wordCount": 1865, "description": "## \u5347\u7ea7\u652f\u6301TLS 1.3\r\n\r\n```shell\r\n# \u4e0b\u8f7d\r\nwget https://www.openssl.org/source/openssl-3.0.13.tar.gz\r\n# \u89e3\u538b\r\ntar -zxvf openssl-3.0.13.tar.gz\r\n# \u914d\u7f6e\u3001\u7f16\u8bd1\r\n./config  --prefix=/usr/local/openssl\r\nmake\r\n# \u68c0\u67e5\u662f\u5426\u51fa\u9519\r\nmake test\r\n# \u5b89\u88c5\r\nmake install\r\n```\r\n\r\n\u5b89\u88c5\u5b8c\u6210\u540e\u68c0\u67e5\u94fe\u63a5\u5e93\u662f\u5426\u6b63\u5e38\uff0c\u5c06\u7f3a\u5c11\u7684\u6587\u4ef6\u76f4\u63a5\u8f6f\u94fe\u63a5\u5230\u7cfb\u7edf\u7684`/usr/lib64`\u76ee\u5f55\u4e0b\r\n\r\n```shell\r\ncd /usr/local/openssl/bin\r\nldd openssl\r\n\r\nlinux-vdso.so.1 =>  (0x00007ffe3893b000)\r\nlibssl.so.3 => not found\r\nlibcrypto.so.3 => not found\r\nlibdl.so.2 => /lib64/libdl.so.2 (0x00007ff49e5e0000)\r\nlibpthread.so.0 => /lib64/libpthread.so.0 (0x00007ff49e3c4000)\r\nlibc.so.6 => /lib64/libc.so.6 (0x00007ff49dff6000)\r\n/lib64/ld-linux-x86-64.so.2 (0x00007ff49e7e4000)\r\n\r\nln -s /usr/local/openssl/lib64/libssl.so.3 /usr/lib64/libssl.so.3\r\nln -s /usr/local/openssl/lib64/libcrypto.so.3 /usr/lib64/libcrypto.so.3\r\n\r\nlinux-vdso.so.1 =>  (0x00007fffd2ddb000)\r\nlibssl.so.3 => /lib64/libssl.so.3 (0x00007fbc48fc8000)\r\nlibcrypto.so.3 => /lib64/libcrypto.so.3 (0x00007fbc48954000)\r\nlibdl.so.2 => /lib64/libdl.so.2 (0x00007fbc48750000)\r\nlibpthread.so.0 => /lib64/libpthread.so.0 (0x00007fbc48534000)\r\nlibc.so.6 => /lib64/libc.so.6 (0x00007fbc48166000)\r\n/lib64/ld-linux-x86-64.so.2 (0x00007fbc4926d000)\r\n```\r\n\r\n\u62a5\u9519\uff1a\r\n\r\n```shell\r\nCan't locate IPC/Cmd.pm in @INC (@INC contains: /home/sonkwo/openssl-3.0.13/util/perl /usr/local/lib64/perl5 /usr/local/share/perl5 /usr/lib64/perl5/vendor_perl /usr/share/perl5/vendor_perl /usr/lib64/perl5 /usr/share/perl5 . /home/sonkwo/openssl-3.0.13/external/perl/Text-Template-1.56/lib) at /home/sonkwo/openssl-3.0.13/util/perl/OpenSSL/config.pm line 19.\r\nBEGIN failed--compilation aborted at /home/sonkwo/openssl-3.0.13/util/perl/OpenSSL/config.pm line 19.\r\nCompilation failed in require at /home/sonkwo/openssl-3.0.13/Configure line 23.\r\nBEGIN failed--compilation aborted at /home/sonkwo/openssl-3.0.13/Configure line 23.\r\n\r\nyum install perl-IPC-Cmd\r\n```\r\n\r\n\u3002", "top": 0, "createdAt": 1718893740, "style": "", "script": "<script defer src=\"http://ssh.witter.top:10012/script.js\" data-website-id=\"b891c729-62b4-46cb-bdca-d622dc706106\"></script>", "head": "", "ogImage": "https://img.witter.top/file/b037878209903b7d5bb17.jpg", "createdDate": "2024-06-20", "dateLabelColor": "#bc4c00"}, "P15": {"htmlDir": "docs/post/Jenkins-Kubernetes-xiang-jie-he.html", "labels": ["CI/CD"], "postTitle": "Jenkins-Kubernetes\u76f8\u7ed3\u5408", "postUrl": "post/Jenkins-Kubernetes-xiang-jie-he.html", "postSourceUrl": "https://github.com/ljwtorch/ljwtorch.github.io/issues/15", "commentNum": 0, "wordCount": 6520, "description": "\r\n## 1.\u5b89\u88c5/\u90e8\u7f72\r\n\r\n### 1.1 docker compose\r\n\r\n`docker-compose.yml`\r\n\r\n```yaml\r\nservices:                                     \r\n  jenkins:\r\n    restart: always                            \r\n    image: jenkins/jenkins:2.414.3  \r\n    #image: jenkins/jenkins:2.387.2 \r\n    container_name: jenkins\r\n    network_mode: host\r\n    ports:                                     \r\n      - 18080:8080                              \r\n      - 28888:28888\r\n    volumes:\r\n      - ./:/var/jenkins_home  \r\n      - /usr/bin/docker:/usr/bin/docker               \r\n      - /usr/local/bin/docker-compose:/usr/local/bin/docker-compose\r\n      - /var/run/docker.sock:/var/run/docker.sock\r\n    environment:\r\n      - TZ=Asia/Shanghai\r\n      - JENKINS_SLAVE_AGENT_PORT=28888\r\n```\r\n\r\n## 2.Pipeline(\u6d41\u6c34\u7ebf\u4efb\u52a1)\r\n\r\n### 2.1 Jenkinsfile\u6982\u89c8\r\n\r\n*\u6d4b\u8bd5\u73af\u5883\u5c06\u670d\u52a1\u90e8\u7f72\u5230k8s\u4e2d\u7684Jenkinsfile\uff0c\u5305\u62ec\u4e86\u9879\u76ee\u4ee3\u7801\u62c9\u53d6\u3001\u914d\u7f6e\u6587\u4ef6\u62c9\u53d6\u3001\u9879\u76ee\u7f16\u8bd1\u3001docker\u955c\u50cf\u6784\u5efa/\u4e0a\u4f20\u3001\u591aagent-workspace\u64cd\u4f5c\u3001Pod\u9996\u6b21\u53d1\u5e03\u548c\u6eda\u52a8\u66f4\u65b0\u68c0\u6d4b*\r\n\r\n```groovy\r\npipeline {\r\n    agent {\r\n        label 'node_X'\r\n    }\r\n    tools {\r\n        jdk 'jdk11'\r\n    }\r\n    environment {\r\n        //\u4e00\u822c\u53ea\u9700\u8981\u4fee\u6539\u8fd9\u91cc\u51e0\u4e2a\r\n        CONTAINER_NAME = 'xxx'\t//\u5bb9\u5668tag\r\n        YAML_NAME = 'xxx-deploy.yml'\t//yml\u6587\u4ef6\u540d\r\n        PUB_ENV = 'test'\t//\u53d1\u5e03\u73af\u5883\uff0c\u5bf9\u5e94\u4ee5\u540e\u8fdb\u884c\u7248\u672c\u63a7\u5236\u7684\u76ee\u5f55\u4f4d\u7f6e\r\n        K8S_NAMESPACE = 'test-xxx'\r\n        PROJECT_GIT_URL = ''       //\u9879\u76ee\u4ee3\u7801\u5730\u5740\r\n        CONFIG_GIT_URL = ''        //\u914d\u7f6e\u6587\u4ef6\u5730\u5740(\u5f53\u9879\u76eeJenkinsfile\u548c\u9879\u76ee\u4e0d\u5728\u540c\u4e00\u4ed3\u5e93\uff0c\u8fd9\u91cc\u6307\u5b58\u653e\u6240\u6709Jenkinsfile\u7684\u4ed3\u5e93)\r\n\r\n        DOCKER_REGISTER_CREDS = credentials('registry_xxx')\t//docker registry\u51ed\u8bc1\r\n        DOCKER_REGISTRY = 'xxxxx'\t//Docker\u4ed3\u5e93\u5730\u5740\r\n        DOCKER_NAMESPACE = 'xxxxx'\t//\u547d\u540d\u7a7a\u95f4\r\n        DOCKER_IMAGE = '${DOCKER_REGISTRY}/${DOCKER_NAMESPACE}/${CONTAINER_NAME}'\t//\u7ec4\u5408\u6210\u5b8c\u6574\u7684\u955c\u50cf\u540d\u79f0\r\n    }\r\n    stages {\r\n        stage('get timestamp') {\r\n            steps {\r\n                script {\r\n                    //\u83b7\u53d6\u5f53\u524d\u65f6\u95f4\u6233\r\n                    def timestamp = sh(returnStdout: true, script: 'date +%Y%m%d%H%M%S').trim()\r\n                    //\u65f6\u95f4\u6233\u8d4b\u503c\r\n                    env.TIMESTAMP = timestamp\r\n                }\r\n            }\r\n        }\r\n        stage('fetch code') {\r\n            steps {\r\n                echo '----------Fetch code----------'\r\n                git branch: 'release', credentialsId: 'git-credentials-backend', url: PROJECT_GIT_URL\r\n            }\r\n        }\r\n        stage('fetch config') {\r\n            agent {\r\n                label 'node_xxx'\t//\u5728stage\u6b65\u9aa4\u4e2d\u53ef\u4ee5\u7a7f\u63d2\u5728\u5176\u4ed6agent\u7684\u64cd\u4f5c\u6b65\u9aa4\r\n            }\r\n            steps {\r\n                cleanWs() // \u6e05\u7406\u5de5\u4f5c\u76ee\u5f55\uff0c\u9632\u6b62\u5de5\u4f5c\u76ee\u5f55\u4ea7\u751f\u5176\u4ed6\u4ea7\u7269\r\n                dir('../jenkinsfile'){\r\n                    echo '----------Fetch config----------'\r\n                    git branch: 'master', credentialsId: 'git-credentials-backend', url: CONFIG_GIT_URL\r\n                }\r\n            }\r\n        }\r\n        stage('maven build'){\r\n            steps {\r\n                sh '/usr/local/maven3/bin/mvn -v'\r\n                sh '/usr/local/maven3/bin/mvn clean package -Dmaven.test.skip=true -U'\r\n            }\r\n        }\r\n        stage('docker build'){\r\n            steps {\r\n                sh '''\r\n                    echo '\u5f53\u524d\u65f6\u95f4\u4e3a: ${env.TIMESTAMP}'\r\n                    docker build -f ./Dockerfile -t ${DOCKER_IMAGE}:${env.TIMESTAMP} .\r\n                '''\r\n            }\r\n        }\r\n        stage('image push'){\r\n            steps {\r\n                sh '''\r\n                    docker login -u ${DOCKER_REGISTER_CREDS_USR} -p=${DOCKER_REGISTER_CREDS_PSW} ${DOCKER_REGISTRY}\r\n                    docker push ${DOCKER_IMAGE}:${env.TIMESTAMP}\r\n                    docker rmi ${DOCKER_IMAGE}:${env.TIMESTAMP}\r\n                '''\r\n            }\r\n        }\r\n        stage('publish cn on k8s'){\r\n            agent {\r\n                label 'node_XXX'\r\n            }\r\n            steps {\r\n                script {\r\n                    // \u8fd0\u884ckubectl\u547d\u4ee4\uff0c\u68c0\u67e5\u65e7\u7248\u672c\u662f\u5426\u5b58\u5728\u4e8e\u96c6\u7fa4\u4e2d\r\n                    def deploymentsName = 'bash -c 'kubectl get deployments -n ${K8S_NAMESPACE} ${CONTAINER_NAME} --output=jsonpath={.metadata.name}; exit 0;''\r\n                    def result = sh(returnStdout: true, script: deploymentsName).trim()\r\n                    echo '\u5373\u5c06\u6267\u884c\u7684\u670d\u52a1: ${result}'\r\n\r\n                    if (result=='${CONTAINER_NAME}') {\r\n                        // \u65e7\u7248\u672c\u5df2\u5b58\u5728\u4e8e\u96c6\u7fa4\u4e2d\uff0c\u6267\u884ckubectl set image\u66f4\u65b0\u955c\u50cf\r\n                        echo '\u6267\u884c\u955c\u50cf\u6eda\u52a8\u66f4\u65b0\uff01'\r\n                        sh '''\r\n                            kubectl set image -n ${K8S_NAMESPACE} deployment/${CONTAINER_NAME} ${CONTAINER_NAME}=${DOCKER_IMAGE}:${env.TIMESTAMP} --record\r\n                        '''\r\n                    } else {\r\n                        // \u65e7\u7248\u672c\u4e0d\u5b58\u5728\u4e8e\u96c6\u7fa4\u4e2d\uff0c\u5148\u6267\u884ckubectl apply\u90e8\u7f72\r\n                        echo '\u670d\u52a1\u4e0d\u5b58\u5728\u96c6\u7fa4\u4e2d\uff0c\u6267\u884c\u9996\u6b21\u90e8\u7f72!'\r\n                        sh '''\r\n                            kubectl apply -f ../jenkinsfile/${PUB_ENV}/${K8S_NAMESPACE}/${YAML_NAME}\r\n                            kubectl set image -n ${K8S_NAMESPACE} deployment/${CONTAINER_NAME} ${CONTAINER_NAME}=${DOCKER_IMAGE}:${env.TIMESTAMP} --record\r\n                        '''\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        stage('Check Pod Status') {\r\n            agent {\r\n                label 'node_xxx'\r\n            }\r\n            steps {\r\n                script {\r\n                    def namespace = env.K8S_NAMESPACE\r\n                    def containerName = env.CONTAINER_NAME\r\n                    def timeoutSeconds = 120\r\n\r\n                    //\u7b49\u5f85\u6eda\u52a8\u66f4\u65b0\u5b8c\u6210\r\n                    sh 'kubectl rollout status deployment -n ${namespace} ${CONTAINER_NAME} --timeout=${timeoutSeconds}s'\r\n                    sh 'sleep 5s'\r\n                    // \u83b7\u53d6Pod\u540d\u79f0\r\n                    def podName = sh(\r\n                        script: 'kubectl get pods -l app=${containerName} -n ${namespace} -o jsonpath='{.items[0].metadata.name}'',\r\n                        returnStdout: true\r\n                    ).trim()\r\n\r\n                    // \u68c0\u67e5\u5bb9\u5668\u72b6\u6001\r\n                    def containerReady = sh(\r\n                        script: 'kubectl get pods ${podName} -n ${namespace} -o jsonpath='{.status.containerStatuses[0].ready}'',\r\n                        returnStdout: true\r\n                    ).trim()\r\n\r\n                    if (containerReady == 'true') {\r\n                        echo 'Container ${containerName} in Pod ${podName} is ready. ContainerIsReady:${containerReady}'\r\n                    } else {\r\n                        error 'Container ${containerName} in Pod ${podName} is not ready. ContainerIsReady:${containerReady}'\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n\r\n### 2.2 \u955c\u50cf\u53d1\u5e03\u5230K8S\r\n\r\n*\u89c1 2.1\u4e2d `publish cn on k8s`\u6b65\u9aa4*\r\n\r\n### 2.3 \u6eda\u52a8\u66f4\u65b0/\u66f4\u65b0\u540e\u68c0\u6d4b\r\n\r\n*\u89c1 2.1 \u4e2d `Check Pod Status` \u6b65\u9aa4*\u3002", "top": 1, "createdAt": 1719071949, "style": "", "script": "<script defer src=\"http://ssh.witter.top:10012/script.js\" data-website-id=\"b891c729-62b4-46cb-bdca-d622dc706106\"></script>", "head": "", "ogImage": "https://img.witter.top/file/b037878209903b7d5bb17.jpg", "createdDate": "2024-06-22", "dateLabelColor": "#bc4c00"}, "P17": {"htmlDir": "docs/post/0-1 -bu-shu-jian-kong-gao-jing-xi-tong-(Prometheus).html", "labels": ["\u5bb9\u5668", "\u76d1\u63a7\u7cfb\u7edf"], "postTitle": "0-1 \u90e8\u7f72\u76d1\u63a7\u544a\u8b66\u7cfb\u7edf(Prometheus)", "postUrl": "post/0-1%20-bu-shu-jian-kong-gao-jing-xi-tong-%28Prometheus%29.html", "postSourceUrl": "https://github.com/ljwtorch/ljwtorch.github.io/issues/17", "commentNum": 0, "wordCount": 14784, "description": "**\u5b8c\u6574docker-compose.yml**\r\n\r\n```yaml\r\nnetworks:\r\n  monitor:\r\n    name: monitor\r\n    driver: bridge\r\n\r\nservices:\r\n  prometheus:\r\n    image: prom/prometheus:latest\r\n    ports:\r\n      - 9090:9090\r\n    restart: always\r\n    volumes:\r\n      - ./prometheus/prometheus.yml:/etc/prometheus/prometheus.yml\r\n      - ./prometheus/:/etc/prometheus\r\n    networks:\r\n      - monitor\r\n    container_name: prometheus\r\n    environment:\r\n      - --web.enable-admin-api\r\n      - --web.enable-lifecycle\r\n\r\n  node-exporter:\r\n    image: quay.io/prometheus/node-exporter:latest\r\n    container_name: node-exporter\r\n    restart: always\r\n    network_mode: host\r\n    pid: host\r\n    volumes:\r\n      - /:/host:ro,rslave\r\n    command: --path.rootfs=/host\r\n    depends_on:\r\n      - prometheus\r\n\r\n  blackbox-exporter:\r\n    image: quay.io/prometheus/blackbox-exporter:latest\r\n    container_name: blackbox-exporter\r\n    restart: always\r\n    ports:\r\n      - '9115:9115'\r\n    volumes:\r\n      - ./blackbox-exporter/:/config\r\n    command: --config.file=/config/blackbox.yml\r\n    depends_on:\r\n      - prometheus\r\n\r\n  alertmanager:\r\n      image: prom/alertmanager:latest\r\n      container_name: alertmanager\r\n      restart: always\r\n      volumes:\r\n          - ./alertmanager/alertmanager.yml:/etc/alertmanager/alertmanager.yml\r\n      ports:\r\n          - '9093:9093'\r\n      networks:\r\n          - monitor\r\n\r\n  dingtalk-webhook:\r\n    image: timonwong/prometheus-webhook-dingtalk:latest\r\n    restart: always\r\n    volumes:\r\n      - ./dingtalk-webhook/config.yml:/etc/prometheus-webhook-dingtalk/config.yml\r\n      - ./dingtalk-webhook/prometheus-webhook-dingtalk:/prometheus-webhook-dingtalk\r\n      - ./dingtalk-webhook/templates:/etc/prometheus-webhook-dingtalk/templates\r\n    ports:\r\n      - 8060:8060\r\n    command: '--web.enable-ui'\r\n    networks:\r\n      - monitor\r\n    container_name: dingtalk-webhook\r\n    depends_on:\r\n      - prometheus\r\n      - node-exporter\r\n      - blackbox-exporter\r\n\r\n  grafana:\r\n    image: grafana/grafana-enterprise\r\n    user: root\r\n    restart: always\r\n    ports:\r\n      - 3000:3000\r\n    networks:\r\n      - monitor\r\n    volumes:\r\n      - ./grafana/data:/var/lib/grafana\r\n    container_name: grafana\r\n    depends_on:\r\n      - prometheus\r\n```\r\n\r\n## 1.Prometheus\r\n\r\n> Prometheus\u53ea\u8bf4\u660e\u8fdb\u884c\u81ea\u6211\u4fee\u6539\u7684\u90e8\u5206\uff0c\u57fa\u672c\u7684\u5b89\u88c5\u6b65\u9aa4\u4e0d\u518d\u8d58\u8ff0\uff01\r\n\r\n### 1.1 \u90e8\u7f72\u65b9\u5f0f\r\n\r\n**\u672c\u673a\u90e8\u7f72**\r\n\r\n\u4e8c\u8fdb\u5236\u6587\u4ef6[[\u4e0b\u8f7d\u94fe\u63a5](https://prometheus.io/download/)](https://prometheus.io/download/)\r\n\r\n```shell\r\n# prometheus-2.53.0.linux-amd64.tar.gz \u5bf9\u4e0b\u8f7d\u540e\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\u8fdb\u884c\u89e3\u538b\r\n\r\n# \u9996\u6b21\u542f\u52a8\u547d\u4ee4\r\nnohup ./prometheus --config.file=prometheus.yml --storage.tsdb.retention.time=90d --web.enable-lifecycle &\r\n\r\n# check.sh -> \u4e8c\u8fdb\u5236\u6587\u4ef6\u90e8\u7f72\u65b9\u5f0f\u7684\u70ed\u91cd\u8f7d\u811a\u672c\r\n#========================================\r\n#!/bin/bash\r\n# \u5b9a\u4e49Prometheus\u914d\u7f6e\u6587\u4ef6\u8def\u5f84\r\nprometheus_config='./prometheus/prometheus.yml'\r\n# \u68c0\u67e5\u914d\u7f6e\u6587\u4ef6\r\ncheck_result=$(./promtool check config '$prometheus_config' 2>&1)\r\nif [[ $check_result =~ 'FAILED' ]]; then\r\n  # \u914d\u7f6e\u6587\u4ef6\u68c0\u67e5\u5931\u8d25\uff0c\u8f93\u51fa\u9519\u8bef\u4fe1\u606f\r\n  echo 'Prometheus config check failed!'\r\n  echo '$check_result'\r\n  exit 1\r\nelse\r\n  # \u914d\u7f6e\u6587\u4ef6\u68c0\u67e5\u6210\u529f\uff0c\u6267\u884c\u91cd\u8f7d\r\n  curl -X POST http://localhost:9090/-/reload\r\n  echo 'Prometheus config check successful!'\r\nfi\r\n#========================================\r\n```\r\n\r\n**systemd\u90e8\u7f72**\r\n\r\n```shell\r\n# \u53ef\u9009\u6dfb\u52a0\u7528\u6237\r\nsudo useradd --no-create-home --shell /bin/false prometheus\r\n# prometheus.service \u6587\u4ef6\r\n\r\n[Unit]\r\nDescription=Prometheus\r\nWants=network-online.target\r\nAfter=network-online.target\r\n\r\n[Service]\r\nUser=prometheus\r\nGroup=prometheus\r\nType=simple\r\nExecStart=/usr/local/bin/prometheus \\\r\n  --config.file=/etc/prometheus/prometheus.yml \\\r\n  --storage.tsdb.path=/var/lib/prometheus/ \\\r\n  --web.console.templates=/usr/share/prometheus/consoles \\\r\n  --web.console.libraries=/usr/share/prometheus/console_libraries\r\n\r\n[Install]\r\nWantedBy=multi-user.target\r\n\r\n# \u8fdb\u884c\u5bf9\u5e94\u7684\u521d\u6b21\u91cd\u8f7d\u547d\u4ee4\r\nsudo systemctl daemon-reload\r\nsudo systemctl enable prometheus\r\nsudo systemctl start prometheus\r\nsudo systemctl status prometheus\r\n```\r\n\r\n**docker-compose\u90e8\u7f72**\r\n\r\n```yaml\r\nnetworks:\r\n  monitor:\r\n    name: monitor\r\n    driver: bridge\r\n\r\nservices:\r\n  prometheus:\r\n    image: prom/prometheus:latest\r\n    ports:\r\n      - 9090:9090\r\n    restart: always\r\n    volumes:\r\n      - ./prometheus/prometheus.yml:/etc/prometheus/prometheus.yml\r\n      - ./prometheus/:/etc/prometheus\r\n    networks:\r\n      - monitor\r\n    container_name: prometheus\r\n    environment:\r\n      - --web.enable-admin-api\r\n      - --web.enable-lifecycle\r\n```\r\n\r\n### 1.2 \u4e3b\u914d\u7f6e\u6587\u4ef6\r\n\r\n> \u91c7\u7528Git+Jenkins(CI/CD)+Docker\u65b9\u5f0f\uff0c\u901a\u8fc7\u672c\u5730\u7f16\u8f91 -> \u63a8\u9001Git -> CI/CD\u6267\u884c\u62c9\u53d6\u548c\u70ed\u66f4\u65b0 -> \u5b8c\u6210\u914d\u7f6e\u6587\u4ef6\u4fee\u6539\u6b65\u9aa4\r\n\r\n`prometheus.yml`\r\n\r\n```yaml\r\n# my global config\r\nglobal:\r\n  scrape_interval: 15s # Set the scrape interval to every 15 seconds. Default is every 1 minute.\r\n  evaluation_interval: 15s # Evaluate rules every 15 seconds. The default is every 1 minute.\r\n  # scrape_timeout is set to the global default (10s).\r\n\r\n# Alertmanager configuration\r\nalerting:\r\n  alertmanagers:\r\n    - static_configs:\r\n        - targets:\r\n           - alertmanager:9093\r\n\r\n# Load rules once and periodically evaluate them according to the global 'evaluation_interval'.\r\n# \u53ef\u4ee5\u4e3a\u901a\u914d\u7b26\u8def\u5f84\uff0c\u6ce8\u610f\u662f\u5bbf\u4e3b\u673a\u8def\u5f84\u8fd8\u662f\u5bb9\u5668\u8def\u5f84\r\nrule_files:\r\n  # - 'first_rules.yml'\r\n  # - 'second_rules.yml'\r\n  - ./rules/*.yml\r\n\r\n# A scrape configuration containing exactly one endpoint to scrape:\r\n# Here it's Prometheus itself.\r\nscrape_configs:\r\n  # The job name is added as a label `job=<job_name>` to any timeseries scraped from this config.\r\n  - job_name: 'prometheus'\r\n    # metrics_path defaults to '/metrics'\r\n    # scheme defaults to 'http'.\r\n    static_configs:\r\n      - targets: ['localhost:9090']\r\n\r\n  - job_name: 'node_exporter'\r\n    metrics_path: /metrics\r\n    static_configs:\r\n    file_sd_configs:\r\n      - files: ['./node-exporter/*.yml']\r\n        refresh_interval: 15s\r\n    relabel_configs:\r\n      - source_labels: [__address__]\r\n        regex: (.*)\r\n        target_label: __address__\r\n        replacement: $1\r\n\r\n  - job_name: 'blackbox_http_2xx'\r\n    scrape_interval: 90s\r\n    metrics_path: /probe\r\n    params:\r\n      module:\r\n      - http_2xx\r\n    static_configs:\r\n    file_sd_configs:\r\n      - files: ['./blackbox_http_2xx/*.yml']\r\n        refresh_interval: 15s\r\n    relabel_configs:\r\n      - source_labels: [__address__]\r\n        target_label: __param_target\r\n      - source_labels: [__param_target]\r\n        target_label: instance\r\n      - target_label: __address__\r\n        replacement: localhost:9115  # blackbox_exporter\u6240\u5728\u7684\u673a\u5668\u548c\u7aef\u53e3\r\n\r\n  - job_name: 'blackbox_http_3min'\r\n    scrape_interval: 3m # \u53ef\u4ee5\u5355\u72ec\u8c03\u6574blackbox\u7684\u6293\u53d6\u9891\u7387\r\n    metrics_path: /probe\r\n    params:\r\n      module:\r\n      - http_2xx\r\n    static_configs:\r\n    file_sd_configs:\r\n      - files: ['./blackbox_http_3min/*.yml']\r\n        refresh_interval: 15s\r\n    relabel_configs:\r\n      - source_labels: [__address__]\r\n        target_label: __param_target\r\n      - source_labels: [__param_target]\r\n        target_label: instance\r\n      - target_label: __address__\r\n        replacement: localhost:9115  # blackbox_exporter\u6240\u5728\u7684\u673a\u5668\u548c\u7aef\u53e3\r\n\r\n  - job_name: 'blackbox_tcp_connect'\r\n    metrics_path: /probe\r\n    params:\r\n      module:\r\n      - tcp_connect\r\n    static_configs:\r\n    file_sd_configs:\r\n      - files: ['./blackbox_tcp_connect/*.yml']\r\n        refresh_interval: 15s\r\n    relabel_configs:\r\n      - source_labels: [__address__]\r\n        target_label: __param_target\r\n      - source_labels: [__param_target]\r\n        target_label: instance\r\n      - target_label: __address__\r\n        replacement: localhost:9115  # blackbox_exporter\u6240\u5728\u7684\u673a\u5668\u548c\u7aef\u53e3\r\n\r\n  - job_name: 'blackbox_ping'\r\n    metrics_path: /probe\r\n    params:\r\n      module:\r\n      - icmp\r\n    static_configs:\r\n    file_sd_configs:\r\n      - files: ['./blackbox_ping/*.yml']\r\n        refresh_interval: 15s\r\n    relabel_configs:\r\n      - source_labels: [__address__]\r\n        target_label: __param_target\r\n      - source_labels: [__param_target]\r\n        target_label: instance\r\n      - target_label: __address__\r\n        replacement: localhost:9115  # blackbox_exporter\u6240\u5728\u7684\u673a\u5668\u548c\u7aef\u53e3\r\n\r\n# \u4ee5\u4e0b\u4e3a\u5927\u6570\u636eHadoop\u6240\u9700\u7684exporter\r\n  - job_name: 'fsimage'\r\n    scrape_interval: 1m   # Depends on how often the name node writes a fsimage file.\r\n    scrape_timeout: 40s    # Depends on size\r\n    static_configs:\r\n      - targets: [ 'xxxx:9709' ]\r\n        labels:\r\n          project: fsimage\r\n\r\n  - job_name: 'kafka-exporter'\r\n    scrape_interval: 20s\r\n    scrape_timeout: 15s\r\n    static_configs:\r\n      - targets: ['xxxx:9308']\r\n        labels:\r\n          project: kafka-exporter\r\n          instance: xxxx:9308\r\n\r\n  - job_name: 'jmx-exporter'\r\n    metrics_path: /metrics\r\n    static_configs:\r\n    file_sd_configs:\r\n      - files: ['./jmx-exporter/*.yml']\r\n        refresh_interval: 15s\r\n```\r\n\r\n### 1.3 \u4ece\u914d\u7f6e\u6587\u4ef6\r\n\r\n`node-exporter.yml`\r\n\r\n```yaml\r\n- targets:\r\n  - xxxx:9100\r\n  labels:    \r\n    project: configure by ur self\r\n    instance: xxx:9100\r\n    name: configure by ur self\r\n```\r\n\r\n`blackbox-exporter.yml`\r\n\r\n```yaml\r\n- targets:\r\n  - put a url on this line, include https or http\r\n  labels:\r\n    project: configure by ur self\r\n    service: xxx\r\n```\r\n\r\n`jmx-exporter.yml`\r\n\r\n```yaml\r\n- targets:\r\n    - kafka:9803\r\n  labels:\r\n    project: node-exporter\r\n    instance: kafka:9803\r\n    process: kafka\r\n```\r\n\r\n`node-rules.yml`\r\n\r\n```yaml\r\ngroups:\r\n  - name: \u670d\u52a1\u5668\u72b6\u6001\u76d1\u63a7\r\n    rules:\r\n      - alert: CPU \u76d1\u63a7\r\n        expr: round((1 - avg(rate(node_cpu_seconds_total{instance='xxxxx:9100',mode='idle'}[1m])) by (instance)) * 100, 0.01) > 80\r\n        for: 1m\r\n        labels:\r\n          severity: critical\r\n        annotations:\r\n          summary: \u670d\u52a1\u5668CPU\u5360\u7528\u7387\u9ad8\r\n          description: '{{$labels.instance}}\u670d\u52a1\u5668 CPU \u5df2\u4f7f\u7528: {{$value}}%'\r\n      - alert: \u5185\u5b58\u76d1\u63a7\r\n        expr: round((1 - (node_memory_MemAvailable_bytes{instance='xxxxx:9100'} / (node_memory_MemTotal_bytes{instance='xxxxx:9100'})))* 100,0.01) > 95\r\n        for: 1m\r\n        labels:\r\n          severity: critical\r\n        annotations:\r\n          summary: \u670d\u52a1\u5668\u5185\u5b58\u5360\u7528\u8fc7\u9ad8\r\n          description: '{{$labels.instance}}\u670d\u52a1\u5668\u5185\u5b58\u5df2\u4f7f\u7528: {{$value}}%'\r\n      - alert: \u78c1\u76d8\u76d1\u63a7\r\n        expr: round((node_filesystem_size_bytes{instance='xxxxx:9100',mountpoint='/'}-node_filesystem_free_bytes{instance='xxxxx:9100',mountpoint='/'})*100/(node_filesystem_avail_bytes{instance='xxxxx:9100',mountpoint='/'}+(node_filesystem_size_bytes{instance='xxxxx:9100',mountpoint='/'}-node_filesystem_free_bytes{instance='xxxxx:9100',mountpoint='/'})),0.01) > 90\r\n        for: 1m\r\n        labels:\r\n          severity: critical\r\n        annotations:\r\n          summary: \u670d\u52a1\u5668\u78c1\u76d8\u5360\u7528\u8fc7\u9ad8\r\n          description: '{{$labels.instance}}\u670d\u52a1\u5668\u78c1\u76d8\u5df2\u4f7f\u7528: {{$value}}%'\r\n      - alert: \u7f51\u7edc\u8fde\u63a5\u6570\u76d1\u63a7\r\n        expr: node_netstat_Tcp_CurrEstab{instance='xxxxx:9100'} > 500\r\n        for: 1m\r\n        labels:\r\n          severity: critical\r\n        annotations:\r\n          summary: \u670d\u52a1\u5668\u7f51\u7edc\u8fde\u63a5\u6570\u8fc7\u9ad8\r\n          description: '{{$labels.instance}}\u670d\u52a1\u5668\u5f53\u524d\u7f51\u7edc\u8fde\u63a5\u6570: {{$value}}'\r\n```\r\n\r\n`blackbox-rules.yml`\r\n\r\n```yaml\r\ngroups:\r\n- name: hosts\u76d1\u63a7\r\n  rules:\r\n  - alert: \u72b6\u6001\u7801\u76d1\u63a7(monitor)\r\n    expr: probe_http_status_code{service='xxx'} != 200\r\n    for: 1m\r\n    labels:\r\n      severity: critical\r\n    annotations:\r\n      summary: xxx\u72b6\u6001\u7801\u4e0d\u4e3a200(monitor)\r\n      description: '\u68c0\u6d4b\u670d\u52a1: {{$labels.service}}, \u72b6\u6001\u7801\u4e3a: {{$value}}'\r\n```\r\n\r\n## 2.Grafana\r\n\r\n> Grafana\u4e0d\u5728\u8d58\u8ff0\u914d\u7f6edashboard\u7b49\u57fa\u7840\u73af\u8282\uff0c\u53ea\u5199\u4e00\u4e9b\u6d41\u4f20\u8f83\u4e3a\u5c11\u7684\u914d\u7f6e\u65b9\u6cd5\r\n\r\n### 2.1 \u90e8\u7f72\u65b9\u5f0f\r\n\r\n**docker-compose\u90e8\u7f72**\r\n\r\n*\u5728\u6267\u884cdocker compose up -d\u4e4b\u524d\uff0c\u9700\u8981\u5148\u6267\u884cdocker run\u7684\u6b65\u9aa4\u5c06\u60f3\u8981\u6301\u4e45\u5316\u7684\u5bb9\u5668\u5185\u6587\u4ef6\u901a\u8fc7docker cp\u62f7\u8d1d\u5230\u5bbf\u4e3b\u673a\u4e0a\uff01*\r\n\r\n```yaml\r\n  grafana:\r\n    image: grafana/grafana-enterprise\r\n    user: root\r\n    restart: always\r\n    ports:\r\n      - 3000:3000\r\n    networks:\r\n      - monitor\r\n    volumes:\r\n      - ./grafana/data:/var/lib/grafana\r\n      - ./grafana/plugins:/var/lib/grafana/plugins\r\n      - ./grafana/log:/var/log/grafana\r\n      - ./grafana/conf:/etc/grafana\r\n    container_name: grafana\r\n    depends_on:\r\n      - prometheus\r\n    extra_hosts:\r\n      - 'url:ip_address'\r\n```\r\n\r\n### 2.2 \u8fde\u63a5LDAP\r\n\r\n**\u8bbe\u7f6e\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684auth.ldap\u4e3atrue  \u6587\u4ef6\u8def\u5f84\uff1a`/usr/share/grafana/conf/defaults.ini`**\r\n\r\n```ini\r\n[auth.ldap]\r\n# Set to `true` to enable LDAP integration (default: `false`)\r\nenabled = true\r\n\r\n# Path to the LDAP specific configuration file (default: `/etc/grafana/ldap.toml`)\r\nconfig_file = /etc/grafana/ldap.toml\r\n\r\n# Allow sign-up should be `true` (default) to allow Grafana to create users on successful LDAP authentication.\r\n# If set to `false` only already existing Grafana users will be able to login.\r\nallow_sign_up = true\r\n```\r\n\r\n**\u6dfb\u52a0ldap\u76f8\u5173\u7684\u8bbe\u7f6e   \u6587\u4ef6\u8def\u5f84\uff1a`/etc/grafana/ldap.toml`**\r\n\r\n```toml\r\n# To troubleshoot and get more log info enable ldap debug logging in grafana.ini\r\n# [log]\r\n# filters = ldap:debug\r\n[[servers]]\r\n# Ldap server host (specify multiple hosts space separated)\r\nhost = 'xxxxx'\r\n# Default port is 389 or 636 if use_ssl = true\r\nport = 636\r\n# Set to true if LDAP server should use an encrypted TLS connection (either with STARTTLS or LDAPS)\r\nuse_ssl = true\r\n# If set to true, use LDAP with STARTTLS instead of LDAPS\r\nstart_tls = false\r\n# set to true if you want to skip ssl cert validation\r\nssl_skip_verify = false\r\n# set to the path to your root CA certificate or leave unset to use system defaults\r\n# root_ca_cert = '/path/to/certificate.crt'\r\n# Authentication against LDAP servers requiring client certificates\r\n# client_cert = '/path/to/client.crt'\r\n# client_key = '/path/to/client.key'\r\n\r\n# Search user bind dn\r\nbind_dn = 'uid=xxxxx,cn=users,cn=accounts,dc=xxxxxxx,dc=cn'\r\n# Search user bind password\r\n# If the password contains # or ; you have to wrap it with triple quotes. Ex '''#password;'''\r\nbind_password = ''''''\r\n\r\n# Timeout in seconds (applies to each host specified in the 'host' entry (space separated))\r\ntimeout = 10\r\n\r\n# User search filter, for example '(cn=%s)' or '(sAMAccountName=%s)' or '(uid=%s)'\r\nsearch_filter = '(uid=%s)'\r\n\r\n# An array of base dns to search through\r\nsearch_base_dns = ['cn=users,cn=accounts,dc=xxx,dc=cn']\r\n\r\n## For Posix or LDAP setups that does not support member_of attribute you can define the below settings\r\n## Please check grafana LDAP docs for examples\r\n#group_search_filter = '(&(objectClass=groupOfNames)(memberOf=%s))'\r\n#group_search_base_dns = ['cn=groups,cn=accounts,dc=xxx,dc=cn']\r\n#group_search_filter_user_attribute = 'uid'\r\n\r\n# Specify names of the ldap attributes your ldap uses\r\n[servers.attributes]\r\nname = 'givenName'\r\nsurname = 'uid'\r\nusername = 'uid'\r\nmember_of = 'memberOf'\r\nemail =  'mail'\r\n\r\n# Map ldap groups to grafana org roles\r\n[[servers.group_mappings]]\r\ngroup_dn = 'cn=admins,cn=groups,cn=accounts,dc=xxxxx,dc=cn'\r\norg_role = 'Admin'\r\n# To make user an instance admin  (Grafana Admin) uncomment line below\r\ngrafana_admin = true\r\n# The Grafana organization database id, optional, if left out the default org (id 1) will be used\r\n# org_id = 1\r\n\r\n[[servers.group_mappings]]\r\ngroup_dn = 'cn=users,cn=groups,cn=accounts,dc=xxxxx,dc=cn'\r\norg_role = 'Editor'\r\n\r\n#[[servers.group_mappings]]\r\n# If you want to match all (or no ldap groups) then you can use wildcard\r\n#group_dn = '*'\r\n#org_role = 'Viewer'\r\n```\u3002", "top": 0, "createdAt": 1719153144, "style": "", "script": "<script defer src=\"http://ssh.witter.top:10012/script.js\" data-website-id=\"b891c729-62b4-46cb-bdca-d622dc706106\"></script>", "head": "", "ogImage": "https://img.witter.top/file/b037878209903b7d5bb17.jpg", "createdDate": "2024-06-23", "dateLabelColor": "#bc4c00"}, "P18": {"htmlDir": "docs/post/0-1 -bu-shu-jian-kong-gao-jing-xi-tong-(Exporter).html", "labels": ["\u5bb9\u5668", "\u76d1\u63a7\u7cfb\u7edf"], "postTitle": "0-1 \u90e8\u7f72\u76d1\u63a7\u544a\u8b66\u7cfb\u7edf(Exporter)", "postUrl": "post/0-1%20-bu-shu-jian-kong-gao-jing-xi-tong-%28Exporter%29.html", "postSourceUrl": "https://github.com/ljwtorch/ljwtorch.github.io/issues/18", "commentNum": 0, "wordCount": 9850, "description": "> [!TIP]\r\n> \u4e0b\u65b9\u91c7\u96c6\u6307\u6807\u5185\u5bb9\u53ea\u5199\u6b63\u5728\u4f7f\u7528\u7684\u4e00\u4e9b\u6307\u6807\u540d\u79f0\uff0c\u5176\u4ed6\u90e8\u5206\u81ea\u884c\u642d\u5efa\u540e\u8fdb\u884c\u4e86\u89e3\uff01\r\n\r\n## 1.node-exporter\r\n\r\n### 1.1 \u90e8\u7f72\u65b9\u5f0f\r\n\r\n**\u5355\u673a\u90e8\u7f72**\r\n\r\n```shell\r\ndocker run -d --name node-exporter --restart=always --net='host' --pid='host' -v '/:/host:ro,rslave' quay.io/prometheus/node-exporter:latest --path.rootfs=/host\r\n```\r\n\r\n**docker compose \u90e8\u7f72**\r\n\r\n```yaml\r\n  node-exporter:\r\n    image: quay.io/prometheus/node-exporter:latest\r\n    container_name: node-exporter\r\n    restart: always\r\n    network_mode: host\r\n    pid: host\r\n    volumes:\r\n      - /:/host:ro,rslave\r\n    command: --path.rootfs=/host\r\n    depends_on:\r\n      - prometheus\r\n```\r\n\r\n\u8bbf\u95ee ip:9100\r\n\r\n### 1.2 \u91c7\u96c6\u6307\u6807\r\n\r\n1. CPU\u4f7f\u7528\u7387\uff1a`round((1 - avg(rate(node_cpu_seconds_total{instance='instance:9100',mode='idle'}[1m])) by (instance)) * 100, 0.01)`\r\n2. RAM\u4f7f\u7528\u7387\uff1a`round((1 - (node_memory_MemAvailable_bytes{instance='instance:9100'} / (node_memory_MemTotal_bytes{instance='instance:9100'})))* 100,0.01)`\r\n3. \u78c1\u76d8\u4f7f\u7528\u7387\uff1a`round((node_filesystem_size_bytes{instance='instance:9100',mountpoint='/'}-node_filesystem_free_bytes{instance='instance:9100',mountpoint='/'})*100/(node_filesystem_avail_bytes{instance='instance:9100',mountpoint='/'}+(node_filesystem_size_bytes{instance='instance:9100',mountpoint='/'}-node_filesystem_free_bytes{instance='instance:9100',mountpoint='/'})),0.01)`\r\n4. \u7f51\u7edc\u8fde\u63a5\u6570\u4f7f\u7528\u91cf\uff1a`node_netstat_Tcp_CurrEstab{instance='instance:9100'}`\r\n\r\n\r\n\r\n## 2.blackbox-exporter\r\n\r\n### 2.1 \u90e8\u7f72\u65b9\u5f0f\r\n\r\n**docker compose\u90e8\u7f72**\r\n\r\n```yaml\r\n  blackbox-exporter:\r\n    image: quay.io/prometheus/blackbox-exporter:latest\r\n    container_name: blackbox-exporter\r\n    restart: always\r\n    ports:\r\n      - '9115:9115'\r\n    volumes:\r\n      - ./blackbox-exporter/:/config\r\n    command: --config.file=/config/blackbox.yml\r\n    depends_on:\r\n      - prometheus\r\n```\r\n\r\n### 2.2 \u914d\u7f6e\u6587\u4ef6\r\n\r\n```yaml\r\nmodules:\r\n  http_2xx:\r\n    prober: http\r\n  http_post_2xx:\r\n    prober: http\r\n    http:\r\n      method: POST\r\n  tcp_connect:\r\n    prober: tcp\r\n  pop3s_banner:\r\n    prober: tcp\r\n    tcp:\r\n      query_response:\r\n      - expect: '^+OK'\r\n      tls: true\r\n      tls_config:\r\n        insecure_skip_verify: false\r\n  ssh_banner:\r\n    prober: tcp\r\n    tcp:\r\n      query_response:\r\n      - expect: '^SSH-2.0-'\r\n  irc_banner:\r\n    prober: tcp\r\n    tcp:\r\n      query_response:\r\n      - send: 'NICK prober'\r\n      - send: 'USER prober prober prober :prober'\r\n      - expect: 'PING :([^ ]+)'\r\n        send: 'PONG ${1}'\r\n      - expect: '^:[^ ]+ 001'\r\n  icmp:\r\n    prober: icmp \r\n  http_2xx_java: # \u81ea\u5b9a\u4e49\u72b6\u6001\u7801200\u7684\u5339\u914d\u89c4\u5219\r\n    prober: http\r\n    http:\r\n      method: GET\r\n      fail_if_body_not_matches_regexp:\r\n      - ''status':'UP''\r\n```\r\n\r\n### 2.3 \u91c7\u96c6\u6307\u6807\r\n\r\n1. \u72b6\u6001\u7801\uff1a`probe_http_status_code`\r\n2. ping\u5ef6\u65f6\uff1a`probe_icmp_duration_seconds`\r\n3. tcp\u8fde\u63a5\uff1a`probe_success`\r\n\r\n## 3.jmx-exporter\r\n\r\n> \u76ee\u524d\u53ea\u7528\u6765\u76d1\u63a7kafka\u5b9e\u4f8b\r\n\r\n### 3.1 \u90e8\u7f72\u65b9\u5f0f\r\n\r\n**\u672c\u5730\u90e8\u7f72**  [[\u4e0b\u8f7d\u94fe\u63a5](https://github.com/prometheus/jmx_exporter/tree/release-0.20.0)](https://github.com/prometheus/jmx_exporter/tree/release-0.20.0)\r\n\r\n\u76d1\u63a7kafka\u6279\u91cf\u542f\u52a8\u811a\u672c\uff1a`bash jmx_kafka.sh status`\r\n\r\n```shell\r\n#!/bin/bash\r\n\r\n# \u5b9a\u4e49\u4e00\u4e2a\u51fd\u6570\u6765\u5904\u7406\u4e0d\u540c\u7684 jmx \u5b9e\u4f8b\r\nmanage_jmx_instance() {\r\n  local instance='$1'\r\n  local port=$((9800 + ${instance#kafka})) # \u63d0\u53d6\u5b9e\u4f8b\u540d\u79f0\u540e\u7684\u6570\u5b57\u5e76\u52a09800\u4f5c\u4e3a\u7aef\u53e3\r\n  local pid_file='/var/run/jmx_${instance}_httpserver.pid'\r\n  local log_file='/root/monitor/log/${instance}.log'\r\n\r\n  case '$2' in\r\n    start)\r\n      if [ -f '$pid_file' ]; then\r\n        echo 'jmx_${instance}_httpserver is already running.'\r\n      else\r\n        # \u4f7f\u7528\u5bf9\u5e94\u7684\u7aef\u53e3\u53f7\u542f\u52a8 jmx_prometheus_httpserver\r\n        nohup java -jar /root/monitor/jmx_prometheus_httpserver-0.20.0.jar $port /root/monitor/${instance}.yml >> '$log_file' 2>&1 &\r\n        echo $! > '$pid_file'\r\n        echo 'jmx_${instance}_httpserver on port $port started.'\r\n      fi\r\n      ;;\r\n    status)\r\n      if [ -f '$pid_file' ]; then\r\n        PID=$(cat '$pid_file')\r\n        ps -p $PID > /dev/null 2>&1\r\n        if [ $? -eq 0 ]; then\r\n          echo 'jmx_${instance}_httpserver is running (PID $PID).'\r\n        else\r\n          echo 'jmx_${instance}_httpserver is not running but PID file exists.'\r\n        fi\r\n      else\r\n        echo 'jmx_${instance}_httpserver is not running.'\r\n      fi\r\n      ;;\r\n    stop)\r\n      if [ -f '$pid_file' ]; then\r\n        PID=$(cat '$pid_file')\r\n        # \u4f7f\u7528 kill \u800c\u4e0d\u662f kill -9 \u4ee5\u907f\u514d\u8fc7\u4e8e\u6fc0\u8fdb\u5730\u7ec8\u6b62\u8fdb\u7a0b\r\n        kill $PID\r\n        rm -f '$pid_file'\r\n        echo 'jmx_${instance}_httpserver stopped.'\r\n      else\r\n        echo 'jmx_${instance}_httpserver is not running.'\r\n      fi\r\n      ;;\r\n    *)\r\n      echo 'Usage: $0 {start|status|stop}'\r\n      exit 1\r\n      ;;\r\n  esac\r\n}\r\n\r\n# \u6839\u636e\u63d0\u4f9b\u7684\u9009\u9879\u8c03\u7528\u51fd\u6570\u6765\u7ba1\u7406\u4e0d\u540c\u7684 jmx \u5b9e\u4f8b,\u540c\u76ee\u5f55\u4e0b\u5b58\u653e\u4e86\u4e09\u4e2akafka1-3.yml\u914d\u7f6e\u6587\u4ef6\u4f9bexporter\u4f7f\u7528\r\nfor instance in kafka1 kafka2 kafka3; do\r\n  manage_jmx_instance '$instance' '$1'\r\ndone\r\n\r\nexit 0\r\n```\r\n\r\n### 3.2 \u914d\u7f6e\u6587\u4ef6\r\n\r\n`kafka1.yml`\r\n\r\n```yaml\r\nlowercaseOutputName: true\r\nhostPort: kafka_ip:9999\r\nrules:\r\n# Special cases and very specific rules\r\n- pattern : kafka.server<type=(.+), name=(.+), clientId=(.+), topic=(.+), partition=(.*)><>Value\r\n  name: kafka_server_$1_$2\r\n  type: GAUGE\r\n  labels:\r\n    clientId: '$3'\r\n    topic: '$4'\r\n    partition: '$5'\r\n- pattern : kafka.server<type=(.+), name=(.+), clientId=(.+), brokerHost=(.+), brokerPort=(.+)><>Value\r\n  name: kafka_server_$1_$2\r\n  type: GAUGE\r\n  labels:\r\n    clientId: '$3'\r\n    broker: '$4:$5'\r\n- pattern : kafka.coordinator.(\\w+)<type=(.+), name=(.+)><>Value\r\n  name: kafka_coordinator_$1_$2_$3\r\n  type: GAUGE\r\n\r\n# Generic per-second counters with 0-2 key/value pairs\r\n- pattern: kafka.(\\w+)<type=(.+), name=(.+)PerSec\\w*, (.+)=(.+), (.+)=(.+)><>Count\r\n  name: kafka_$1_$2_$3_total\r\n  type: COUNTER\r\n  labels:\r\n    '$4': '$5'\r\n    '$6': '$7'\r\n- pattern: kafka.(\\w+)<type=(.+), name=(.+)PerSec\\w*, (.+)=(.+)><>Count\r\n  name: kafka_$1_$2_$3_total\r\n  type: COUNTER\r\n  labels:\r\n    '$4': '$5'\r\n- pattern: kafka.(\\w+)<type=(.+), name=(.+)PerSec\\w*><>Count\r\n  name: kafka_$1_$2_$3_total\r\n  type: COUNTER\r\n\r\n# Quota specific rules\r\n- pattern: kafka.server<type=(.+), user=(.+), client-id=(.+)><>([a-z-]+)\r\n  name: kafka_server_quota_$4\r\n  type: GAUGE\r\n  labels:\r\n    resource: '$1'\r\n    user: '$2'\r\n    clientId: '$3'\r\n- pattern: kafka.server<type=(.+), client-id=(.+)><>([a-z-]+)\r\n  name: kafka_server_quota_$3\r\n  type: GAUGE\r\n  labels:\r\n    resource: '$1'\r\n    clientId: '$2'\r\n- pattern: kafka.server<type=(.+), user=(.+)><>([a-z-]+)\r\n  name: kafka_server_quota_$3\r\n  type: GAUGE\r\n  labels:\r\n    resource: '$1'\r\n    user: '$2'\r\n\r\n# Generic gauges with 0-2 key/value pairs\r\n- pattern: kafka.(\\w+)<type=(.+), name=(.+), (.+)=(.+), (.+)=(.+)><>Value\r\n  name: kafka_$1_$2_$3\r\n  type: GAUGE\r\n  labels:\r\n    '$4': '$5'\r\n    '$6': '$7'\r\n- pattern: kafka.(\\w+)<type=(.+), name=(.+), (.+)=(.+)><>Value\r\n  name: kafka_$1_$2_$3\r\n  type: GAUGE\r\n  labels:\r\n    '$4': '$5'\r\n- pattern: kafka.(\\w+)<type=(.+), name=(.+)><>Value\r\n  name: kafka_$1_$2_$3\r\n  type: GAUGE\r\n\r\n# Emulate Prometheus 'Summary' metrics for the exported 'Histogram's.\r\n#\r\n# Note that these are missing the '_sum' metric!\r\n- pattern: kafka.(\\w+)<type=(.+), name=(.+), (.+)=(.+), (.+)=(.+)><>Count\r\n  name: kafka_$1_$2_$3_count\r\n  type: COUNTER\r\n  labels:\r\n    '$4': '$5'\r\n    '$6': '$7'\r\n- pattern: kafka.(\\w+)<type=(.+), name=(.+), (.+)=(.*), (.+)=(.+)><>(\\d+)thPercentile\r\n  name: kafka_$1_$2_$3\r\n  type: GAUGE\r\n  labels:\r\n    '$4': '$5'\r\n    '$6': '$7'\r\n    quantile: '0.$8'\r\n- pattern: kafka.(\\w+)<type=(.+), name=(.+), (.+)=(.+)><>Count\r\n  name: kafka_$1_$2_$3_count\r\n  type: COUNTER\r\n  labels:\r\n    '$4': '$5'\r\n- pattern: kafka.(\\w+)<type=(.+), name=(.+), (.+)=(.*)><>(\\d+)thPercentile\r\n  name: kafka_$1_$2_$3\r\n  type: GAUGE\r\n  labels:\r\n    '$4': '$5'\r\n    quantile: '0.$6'\r\n- pattern: kafka.(\\w+)<type=(.+), name=(.+)><>Count\r\n  name: kafka_$1_$2_$3_count\r\n  type: COUNTER\r\n- pattern: kafka.(\\w+)<type=(.+), name=(.+)><>(\\d+)thPercentile\r\n  name: kafka_$1_$2_$3\r\n  type: GAUGE\r\n  labels:\r\n    quantile: '0.$4'\r\n\r\n# Generic gauges for MeanRate Percent\r\n# Ex) kafka.server<type=KafkaRequestHandlerPool, name=RequestHandlerAvgIdlePercent><>MeanRate\r\n- pattern: kafka.(\\w+)<type=(.+), name=(.+)Percent\\w*><>MeanRate\r\n  name: kafka_$1_$2_$3_percent\r\n  type: GAUGE\r\n- pattern: kafka.(\\w+)<type=(.+), name=(.+)Percent\\w*><>Value\r\n  name: kafka_$1_$2_$3_percent\r\n  type: GAUGE\r\n- pattern: kafka.(\\w+)<type=(.+), name=(.+)Percent\\w*, (.+)=(.+)><>Value\r\n  name: kafka_$1_$2_$3_percent\r\n  type: GAUGE\r\n  labels:\r\n    '$4': '$5'\r\n```\r\n\r\n### 3.3 \u91c7\u96c6\u6307\u6807\r\n\r\n1. \u6307\u5b9akafka-topic\u6d88\u606f\u6570\u91cf\uff1a`round(increase(kafka_server_brokertopicmetrics_messagesin_total{topic='kafka_topic'}[1h]),0.01)`\r\n\r\n## 4.mysql-exporter\r\n\r\n### 4.1 \u90e8\u7f72\u65b9\u5f0f\r\n\r\n```shell\r\ndocker run -d --name mysql-exporter --restart always -p 9104:9104 -e DATA_SOURCE_NAME='user:passwd@(ip:3306)/' prom/mysqld-exporter\r\n```\r\n\r\n### 4.2 \u6307\u6807\u540d\u79f0\r\n\r\n1. Mysql\u76d1\u63a7agent\u5b58\u6d3b\uff1amysql_up\r\n2. \u8fde\u63a5\u6570\uff1amysql_global_status_threads_connected\r\n3. \u6587\u4ef6\u6253\u5f00\u6570\uff1amysql_global_status_innodb_num_open_files\r\n4. \u4ece\u5e93\u53ea\u8bfb\uff1amysql_global_variables_read_only\r\n5. \u4e3b\u4ece\u5ef6\u8fdf\uff1amysql_slave_status_seconds_behind_master\r\n6. sql\u7ebf\u7a0b\uff1amysql_slave_status_slave_sql_running\r\n7. IO\u7ebf\u7a0b\uff1amysql_slave_status_slave_io_running\r\n8. \u5165\u53e3\u6d41\u91cf\uff1amysql_global_status_bytes_received\r\n9. \u51fa\u53e3\u6d41\u91cf\uff1amysql_global_status_bytes_sent\r\n10. \u5199\u64cd\u4f5c\u901f\u7387\uff1amysql_global_status_commands_total\r\n11. \u6162\u67e5\u8be2\uff1amysql_global_status_slow_queries\r\n12. \u67e5\u8be2\u901f\u7387\uff1amysql_global_status_questions\r\n13. \u53ef\u7528\u8fde\u63a5\u6570\uff1amysql_global_variables_max_connections\r\n14. \u7f13\u51b2\u6c60\u5229\u7528\u7387\uff1amysql_global_status_buffer_pool_pages\r\n15. \u6253\u5f00\u6587\u4ef6\u6570\u91cf\u9650\u5236\uff1amysql_global_variables_open_files_limit\r\n16. \u542f\u7528\u4e86InnoDB\u5f3a\u5236\u6062\u590d\u529f\u80fd\uff1amysql_global_variables_innodb_force_recovery\r\n17. InnoDB\u65e5\u5fd7\u6587\u4ef6\u5927\u5c0f\uff1amysql_global_variables_innodb_log_file_size\r\n18. InnoDB\u63d2\u4ef6\u5df2\u542f\u7528\uff1amysql_global_variables_ignore_builtin_innodb\r\n19. Binary Log\u72b6\u6001\uff1amysql_global_variables_log_bin\r\n20. Binlog\u7f13\u5b58\u5927\u5c0f\uff1amysql_global_variables_binlog_cache_size\r\n21. \u540c\u6b65Binlog\u72b6\u6001\uff1amysql_global_variables_sync_binlog\r\n22. IO\u7ebf\u7a0b\u72b6\u6001\uff1amysql_slave_status_slave_io_running\r\n23. sql\u7ebf\u7a0b\u72b6\u6001\uff1amysql_slave_status_slave_sql_running\r\n24. InnoDB\u65e5\u5fd7\u7b49\u5f85\u91cf\uff1amysql_global_status_innodb_log_waits \uff08\u4e0d\u4e3a0\u7684\u8bdd\uff0cInnoDB log buffer\u56e0\u7a7a\u95f4\u4e0d\u8db3\u800c\u7b49\u5f85\uff09\u3002", "top": 0, "createdAt": 1719210808, "style": "<style>.markdown-alert{padding:0.5rem 1rem;margin-bottom:1rem;border-left:.25em solid var(--borderColor-default,var(--color-border-default));}.markdown-alert .markdown-alert-title {display:flex;font-weight:var(--base-text-weight-medium,500);align-items:center;line-height:1;}.markdown-alert>:first-child {margin-top:0;}.markdown-alert>:last-child {margin-bottom:0;}</style><style>.markdown-alert.markdown-alert-tip {border-left-color:var(--borderColor-success-emphasis, var(--color-success-emphasis));background-color:var(--color-success-subtle);}.markdown-alert.markdown-alert-tip .markdown-alert-title {color: var(--fgColor-success,var(--color-success-fg));}</style>", "script": "<script defer src=\"http://ssh.witter.top:10012/script.js\" data-website-id=\"b891c729-62b4-46cb-bdca-d622dc706106\"></script>", "head": "", "ogImage": "https://img.witter.top/file/b037878209903b7d5bb17.jpg", "createdDate": "2024-06-24", "dateLabelColor": "#bc4c00"}, "P19": {"htmlDir": "docs/post/Debian-kai-qi-smb-fu-wu.html", "labels": ["Linux"], "postTitle": "Debian\u5f00\u542fsmb\u670d\u52a1", "postUrl": "post/Debian-kai-qi-smb-fu-wu.html", "postSourceUrl": "https://github.com/ljwtorch/ljwtorch.github.io/issues/19", "commentNum": 0, "wordCount": 1083, "description": "1. \u5b89\u88c5samba\uff1a`sudo apt install samba smbclient cifs-utils`\r\n\r\n2. \u521b\u5efasamba\u76ee\u5f55\r\n\r\n   ```shell\r\n   sudo mkdir /mnt/public\r\n   sudo mkdir /mnt/private\r\n   \r\n   sudo vim /etc/samba/smb.conf\r\n   \r\n   [public]\r\n      comment = Public Folder\r\n      path = /mnt/public\r\n      writable = yes\r\n      guest ok = yes\r\n      guest only = yes\r\n      force create mode = 775\r\n      force directory mode = 775\r\n   [private]\r\n      comment = Private Folder\r\n      path = /mnt/private\r\n      writable = yes\r\n      guest ok = no\r\n      valid users = @smbshare\r\n      force create mode = 770\r\n      force directory mode = 770\r\n      inherit permissions = yes\r\n   ```\r\n\r\n3. \u521b\u5efa\u5171\u4eab\u7528\u6237\u548c\u7ec4\r\n\r\n   ```shell\r\n   sudo groupadd smb\r\n   sudo chgrp -R smb /mnt/private /mnt/public\r\n   sudo chmod 2770 /mnt/private\r\n   sudo chmod 2775 /mnt/public\r\n   # \u6dfb\u52a0\u65e0\u9700\u767b\u5f55\u7528\u6237\r\n   sudo useradd -M -s /sbin/nologin smbuser\r\n   # \u6dfb\u52a0\u5230\u5171\u4eab\u7ec4\u4e2d\r\n   sudo usermod -aG smb smbuser\r\n   # \u521b\u5efa\u5bc6\u7801\u5e76\u542f\u7528\r\n   sudo smbpasswd -a smbuser    smbpwd\r\n   sudo smbpasswd -e smbuser\r\n   ```\r\n\r\n4. \u672c\u5730\u6d4b\u8bd5\r\n\r\n   ```shell\r\n   sudo testparm\r\n   ```\r\n\r\n5. \u5c40\u57df\u7f51\u8fde\u63a5\uff1a`smb://ip`\r\n\r\n\u3002", "top": 0, "createdAt": 1719469714, "style": "", "script": "<script defer src=\"http://ssh.witter.top:10012/script.js\" data-website-id=\"b891c729-62b4-46cb-bdca-d622dc706106\"></script>", "head": "", "ogImage": "https://img.witter.top/file/b037878209903b7d5bb17.jpg", "createdDate": "2024-06-27", "dateLabelColor": "#bc4c00"}, "P20": {"htmlDir": "docs/post/Kubernetes The Hard Way\uff08-yi-wen-\uff09.html", "labels": ["K8S"], "postTitle": "Kubernetes The Hard Way\uff08\u8bd1\u6587\uff09", "postUrl": "post/Kubernetes%20The%20Hard%20Way%EF%BC%88-yi-wen-%EF%BC%89.html", "postSourceUrl": "https://github.com/ljwtorch/ljwtorch.github.io/issues/20", "commentNum": 0, "wordCount": 5597, "description": "> [!IMPORTANT]\r\n> [GitHub\u539f\u6587\u94fe\u63a5](https://github.com/kelseyhightower/kubernetes-the-hard-way) \u672c\u6587\u4f7f\u7528ChatGPT\u534f\u52a9\u7ffb\u8bd1\r\n\r\n# \u5148\u51b3\u6761\u4ef6\r\n\r\n\u5728\u672c\u5b9e\u9a8c\u4e2d\uff0c\u60a8\u5c06\u56de\u987e\u8ddf\u968f\u672c\u6559\u7a0b\u6240\u9700\u7684\u673a\u5668\u8981\u6c42\u3002", "top": 0, "createdAt": 1719636560, "style": "<style>.markdown-alert{padding:0.5rem 1rem;margin-bottom:1rem;border-left:.25em solid var(--borderColor-default,var(--color-border-default));}.markdown-alert .markdown-alert-title {display:flex;font-weight:var(--base-text-weight-medium,500);align-items:center;line-height:1;}.markdown-alert>:first-child {margin-top:0;}.markdown-alert>:last-child {margin-bottom:0;}</style><style>.markdown-alert.markdown-alert-important {border-left-color:var(--borderColor-done-emphasis, var(--color-done-emphasis));background-color:var(--color-done-subtle);}.markdown-alert.markdown-alert-important .markdown-alert-title {color: var(--fgColor-done,var(--color-done-fg));}</style>", "script": "<script defer src=\"http://ssh.witter.top:10012/script.js\" data-website-id=\"b891c729-62b4-46cb-bdca-d622dc706106\"></script>", "head": "", "ogImage": "https://img.witter.top/file/b037878209903b7d5bb17.jpg", "createdDate": "2024-06-29", "dateLabelColor": "#bc4c00"}, "P21": {"htmlDir": "docs/post/Drone CI-CD.html", "labels": ["CI/CD"], "postTitle": "Drone CI/CD", "postUrl": "post/Drone%20CI-CD.html", "postSourceUrl": "https://github.com/ljwtorch/ljwtorch.github.io/issues/21", "commentNum": 0, "wordCount": 809, "description": "[\u5b98\u65b9\u6587\u6863](https://docs.drone.io/)\r\n\r\ndrone-server+ssh-runner \r\n\r\ndocker compose \u90e8\u7f72\r\n\r\n```yaml\r\nservices:\r\n  drone:\r\n    image: drone/drone:latest\r\n    volumes:\r\n      - ./:/data\r\n    environment:\r\n      - DRONE_GITHUB_CLIENT_ID=\r\n      - DRONE_GITHUB_CLIENT_SECRET=\r\n      - DRONE_RPC_SECRET=\r\n      - DRONE_SERVER_HOST=\r\n      - DRONE_SERVER_PROTO=http\r\n    ports:\r\n      - '8085:80'\r\n      - '4433:443'\r\n    restart: always\r\n    container_name: drone\r\n\r\n  drone-runner:\r\n    image: drone/drone-runner-ssh\r\n    environment:\r\n      - DRONE_RPC_PROTO=http\r\n      - DRONE_RPC_HOST=\r\n      - DRONE_RPC_SECRET=\r\n    ports:\r\n      - '3001:3000'\r\n    restart: always\r\n    container_name: runner-ssh\r\n```\r\n![image](https://github.com/ljwtorch/ljwtorch.github.io/assets/64066892/8aee94fa-7f40-48bc-be49-52f85decf879)\r\n\r\n\u3002", "top": 0, "createdAt": 1720077478, "style": "", "script": "<script defer src=\"http://ssh.witter.top:10012/script.js\" data-website-id=\"b891c729-62b4-46cb-bdca-d622dc706106\"></script>", "head": "", "ogImage": "https://img.witter.top/file/b037878209903b7d5bb17.jpg", "createdDate": "2024-07-04", "dateLabelColor": "#bc4c00"}, "P22": {"htmlDir": "docs/post/you-qu-xiang-mu-shou-ji.html", "labels": ["documentation"], "postTitle": "\u6709\u8da3\u9879\u76ee\u6536\u96c6", "postUrl": "post/you-qu-xiang-mu-shou-ji.html", "postSourceUrl": "https://github.com/ljwtorch/ljwtorch.github.io/issues/22", "commentNum": 0, "wordCount": 190, "description": "> [!NOTE]\r\n> \u6574\u7406\u81eaKoala\u804a\u5f00\u6e90\r\n\r\n- [Cyber Scarecrow|\u8d5b\u535a\u7a3b\u8349\u4eba](https://www.cyberscarecrow.com)\r\n- [Yazi|Rust \u7f16\u5199\u7ec8\u7aef\u6587\u4ef6\u7ba1\u7406\u5668](https://github.com/sxyazi/yazi)\r\n- [Glasskube|K8s \u5305\u7ba1\u7406\u5668](https://glasskube.dev/)\u3002", "top": 0, "createdAt": 1720158652, "style": "<style>.markdown-alert{padding:0.5rem 1rem;margin-bottom:1rem;border-left:.25em solid var(--borderColor-default,var(--color-border-default));}.markdown-alert .markdown-alert-title {display:flex;font-weight:var(--base-text-weight-medium,500);align-items:center;line-height:1;}.markdown-alert>:first-child {margin-top:0;}.markdown-alert>:last-child {margin-bottom:0;}</style><style>.markdown-alert.markdown-alert-note {border-left-color:var(--borderColor-accent-emphasis, var(--color-accent-emphasis));background-color:var(--color-accent-subtle);}.markdown-alert.markdown-alert-note .markdown-alert-title {color: var(--fgColor-accent,var(--color-accent-fg));}</style>", "script": "<script defer src=\"http://ssh.witter.top:10012/script.js\" data-website-id=\"b891c729-62b4-46cb-bdca-d622dc706106\"></script>", "head": "", "ogImage": "https://img.witter.top/file/b037878209903b7d5bb17.jpg", "createdDate": "2024-07-05", "dateLabelColor": "#bc4c00"}, "P23": {"htmlDir": "docs/post/MySQL-de-bei-fen---hui-fu.html", "labels": ["Linux"], "postTitle": "MySQL\u7684\u5907\u4efd/\u6062\u590d", "postUrl": "post/MySQL-de-bei-fen---hui-fu.html", "postSourceUrl": "https://github.com/ljwtorch/ljwtorch.github.io/issues/23", "commentNum": 0, "wordCount": 1947, "description": "\r\n### \u5907\u4efd\r\n\r\n**mysqldump**\r\n\r\n**\u5b89\u88c5\uff1a**\u5b58\u50a8\u5e93\u4e0b\u8f7d[[\u5730\u5740](https://dev.mysql.com/downloads/)](https://dev.mysql.com/downloads/)\uff0c\u9009\u62e9\u5bf9\u5e94\u7684\u5305\u7ba1\u7406\u5668\r\n\r\n\u5907\u4efd\u591a\u4e2a\u6570\u636e\u5e93\u811a\u672c\uff1a\r\n\r\n```shell\r\n#!/bin/bash\r\n\r\n# \u914d\u7f6e\u90e8\u5206\r\nDB_HOST='localhost'\r\nDB_USER='your_username'\r\nDB_PASS='your_password'\r\nDATABASES=('database1' 'database2' 'database3')  # \u9700\u8981\u5907\u4efd\u7684\u6570\u636e\u5e93\u5217\u8868\r\nBACKUP_DIR='/path/to/your/backup/directory'\r\nDATE=$(date +'%Y-%m-%d_%H-%M-%S')\r\n\r\n# \u521b\u5efa\u5907\u4efd\u76ee\u5f55\uff08\u5982\u679c\u4e0d\u5b58\u5728\uff09\r\nmkdir -p $BACKUP_DIR\r\n\r\n# \u5907\u4efd\u6bcf\u4e2a\u6570\u636e\u5e93\r\nfor DB_NAME in '${DATABASES[@]}'; do\r\n  BACKUP_FILE='$BACKUP_DIR/${DB_NAME}_backup_$DATE.sql'\r\n  mysqldump -h $DB_HOST -u $DB_USER -p$DB_PASS $DB_NAME > $BACKUP_FILE\r\n  \r\n  # \u68c0\u67e5\u5907\u4efd\u662f\u5426\u6210\u529f\r\n  if [ $? -eq 0 ]; then\r\n    echo '[$DATE] Database backup successful: $BACKUP_FILE'\r\n  else\r\n    echo '[$DATE] Database backup failed for $DB_NAME' >&2\r\n  fi\r\ndone\r\n\r\n# \u4fdd\u7559\u6700\u8fd17\u5929\u7684\u5907\u4efd\uff0c\u5220\u9664\u66f4\u65e9\u7684\u5907\u4efd\u6587\u4ef6\r\nfind $BACKUP_DIR -type f -name '*_backup_*.sql' -mtime +7 -exec rm {} \\;\r\n\r\necho '[$DATE] Old backups cleaned up'\r\n```\r\n\r\n\u5907\u4efd\u6574\u4e2a\u6570\u636e\u5e93\u5b9e\u4f8b\uff1a\r\n\r\n```shell\r\n#!/bin/bash\r\n\r\n# \u914d\u7f6e\u90e8\u5206\r\nDB_HOST='localhost'\r\nDB_USER='your_username'\r\nDB_PASS='your_password'\r\nBACKUP_DIR='/path/to/your/backup/directory'\r\nDATE=$(date +'%Y-%m-%d_%H-%M-%S')\r\nBACKUP_FILE='$BACKUP_DIR/all_databases_backup_$DATE.sql'\r\n\r\n# \u521b\u5efa\u5907\u4efd\u76ee\u5f55\uff08\u5982\u679c\u4e0d\u5b58\u5728\uff09\r\nmkdir -p $BACKUP_DIR\r\n\r\n# \u5907\u4efd\u6574\u4e2a MySQL \u5b9e\u4f8b\r\nmysqldump -h $DB_HOST -u $DB_USER -p$DB_PASS --all-databases > $BACKUP_FILE\r\n\r\n# \u68c0\u67e5\u5907\u4efd\u662f\u5426\u6210\u529f\r\nif [ $? -eq 0 ]; then\r\n  echo '[$DATE] All databases backup successful: $BACKUP_FILE'\r\nelse\r\n  echo '[$DATE] All databases backup failed' >&2\r\n  exit 1\r\nfi\r\n\r\n# \u4fdd\u7559\u6700\u8fd17\u5929\u7684\u5907\u4efd\uff0c\u5220\u9664\u66f4\u65e9\u7684\u5907\u4efd\u6587\u4ef6\r\nfind $BACKUP_DIR -type f -name 'all_databases_backup_*.sql' -mtime +7 -exec rm {} \\;\r\n\r\necho '[$DATE] Old backups cleaned up'\r\n```\r\n\r\n### \u6062\u590d\r\n\r\n```shell\r\nmysql -u your_username -p -e 'CREATE DATABASE IF NOT EXISTS database1;'\r\nmysql -u your_username -p database1 < /path/to/your/backup/directory/database1_backup.sql\r\n# \u6062\u590d\u6574\u4e2a\u5b9e\u4f8b\r\nmysql -u your_username -p < /path/to/your/backup/directory/all_databases_backup.sql\r\n```\u3002", "top": 0, "createdAt": 1720165877, "style": "", "script": "<script defer src=\"http://ssh.witter.top:10012/script.js\" data-website-id=\"b891c729-62b4-46cb-bdca-d622dc706106\"></script>", "head": "", "ogImage": "https://img.witter.top/file/b037878209903b7d5bb17.jpg", "createdDate": "2024-07-05", "dateLabelColor": "#bc4c00"}, "P24": {"htmlDir": "docs/post/systemd-shou-hu-jin-cheng-wen-jian.html", "labels": ["Linux"], "postTitle": "systemd\u5b88\u62a4\u8fdb\u7a0b\u6587\u4ef6", "postUrl": "post/systemd-shou-hu-jin-cheng-wen-jian.html", "postSourceUrl": "https://github.com/ljwtorch/ljwtorch.github.io/issues/24", "commentNum": 0, "wordCount": 1149, "description": "## \u4e00\u4e9bsystemd\u6307\u4ee4\r\n\r\n1. \u5217\u51fa\u5f00\u673a\u81ea\u542f\u7684\u8fdb\u7a0b\uff1a`systemctl list-unit-files --type=service --state=enabled`\r\n2. \u5217\u51fa\u5f53\u524d\u6b63\u5728\u8fd0\u884c\u7684\u8fdb\u7a0b\uff1a`systemctl list-units --type=service --state=running`\r\n\r\n## Nginx\r\n\r\n```ini\r\n[Unit]\r\nDescription=The NGINX HTTP and reverse proxy server\r\nAfter=network.target\r\n\r\n[Service]\r\nType=forking\r\nPIDFile=/var/run/nginx.pid\r\nExecStartPre=/usr/sbin/nginx -t -c /usr/local/openresty/nginx/conf/nginx.conf\r\nExecStart=/usr/sbin/nginx -c /usr/local/openresty/nginx/conf/nginx.conf\r\nExecReload=/usr/sbin/nginx -s reload\r\nExecStop=/usr/sbin/nginx -s quit\r\nPrivateTmp=true\r\n\r\n[Install]\r\nWantedBy=multi-user.target\r\n```\r\n\r\n## Prometheus\r\n\r\n```ini\r\n[Unit]\r\nDescription=Prometheus service\r\nAfter=network.target\r\n\r\n[Service]\r\nUser=root\r\nType=simple\r\nExecStart=/home/sonkwo/monitor/prometheus/prometheus \\\r\n--web.listen-address=0.0.0.0:9090 \\\r\n--storage.tsdb.path=/etc/prometheus/data \\\r\n--config.file=/etc/prometheus/prometheus.yml \\\r\n--storage.tsdb.retention.time=60d \\\r\n--web.enable-lifecycle \\\r\n--web.enable-admin-api\r\nExecReload=/bin/kill -s HUP $MAINPID\r\nExecStop=/bin/kill -s QUIT $MAINPID\r\nRestart=on-failure\r\n\r\n[Install]\r\nWantedBy=multi-user.target\r\n```\r\n\r\n\u3002", "top": 0, "createdAt": 1721024285, "style": "", "script": "<script defer src=\"http://ssh.witter.top:10012/script.js\" data-website-id=\"b891c729-62b4-46cb-bdca-d622dc706106\"></script>", "head": "", "ogImage": "https://img.witter.top/file/b037878209903b7d5bb17.jpg", "createdDate": "2024-07-15", "dateLabelColor": "#bc4c00"}, "P25": {"htmlDir": "docs/post/redis -xiao-ji.html", "labels": ["Linux", "\u6570\u636e\u5e93"], "postTitle": "redis \u5c0f\u8bb0", "postUrl": "post/redis%20-xiao-ji.html", "postSourceUrl": "https://github.com/ljwtorch/ljwtorch.github.io/issues/25", "commentNum": 0, "wordCount": 975, "description": "## \u8ba1\u7b97KEYS\u5360\u7528\u5185\u5b58\u5927\u5c0f\r\n\r\n```lua\r\n-- \u521d\u59cb\u5316\u6e38\u6807\u4e3a '0'\uff0c\u7528\u4e8e SCAN \u547d\u4ee4\u7684\u521d\u59cb\u503c\r\nlocal cursor = '0'\r\n-- \u521b\u5efa\u4e00\u4e2a\u7a7a\u8868 result\uff0c\u7528\u4e8e\u5b58\u50a8\u7ed3\u679c\r\nlocal result = {}\r\n-- \u4f7f\u7528 repeat \u5faa\u73af\uff0c\u76f4\u5230\u6e38\u6807\u8fd4\u56de '0' \u8868\u793a\u626b\u63cf\u7ed3\u675f\r\nrepeat\r\n    -- \u4f7f\u7528 SCAN \u547d\u4ee4\u9010\u6b65\u83b7\u53d6\u952e\uff0cSCAN \u547d\u4ee4\u8fd4\u56de\u4e00\u4e2a\u8868\uff0c\u7b2c\u4e00\u4e2a\u5143\u7d20\u662f\u65b0\u7684\u6e38\u6807\uff0c\u7b2c\u4e8c\u4e2a\u5143\u7d20\u662f\u952e\u7684\u5217\u8868\r\n    local res = redis.call('SCAN', cursor)\r\n    -- \u66f4\u65b0\u6e38\u6807\u4e3a\u65b0\u7684\u6e38\u6807\u503c\uff0c\u4ee5\u4fbf\u5728\u4e0b\u4e00\u6b21\u8fed\u4ee3\u4e2d\u7ee7\u7eed\u626b\u63cf\r\n    cursor = res[1]\r\n    -- \u83b7\u53d6\u952e\u7684\u5217\u8868\r\n    local keys = res[2]\r\n    -- \u904d\u5386\u6bcf\u4e2a\u952e\r\n    for _, key in ipairs(keys) do\r\n        -- \u4f7f\u7528 MEMORY USAGE \u547d\u4ee4\u83b7\u53d6\u952e\u7684\u5185\u5b58\u4f7f\u7528\u60c5\u51b5\r\n        local memory = redis.call('MEMORY', 'USAGE', key)\r\n        -- \u5c06\u952e\u548c\u5176\u5185\u5b58\u4f7f\u7528\u60c5\u51b5\u683c\u5f0f\u5316\u4e3a\u5b57\u7b26\u4e32\uff0c\u5e76\u63d2\u5165\u5230\u7ed3\u679c\u8868\u4e2d\r\n        table.insert(result, key .. ': ' .. memory .. ' bytes')\r\n    end\r\n    -- \u6dfb\u52a0\u5ef6\u8fdf\u4ee5\u964d\u4f4e Redis \u7684 CPU \u5360\u7528\u7387\uff0c\u5355\u4f4d\u4e3a\u79d2\r\n    redis.call('DEBUG', 'SLEEP', 0.1)    \r\n-- \u7ee7\u7eed\u5faa\u73af\uff0c\u76f4\u5230\u6e38\u6807\u4e3a '0' \u8868\u793a\u626b\u63cf\u7ed3\u675f\r\nuntil cursor == '0'\r\n-- \u8fd4\u56de\u7ed3\u679c\u8868\r\nreturn result\r\n```\r\n\r\n**\u4f7f\u7528redis-cli**\r\n\r\n```shell\r\nredis-cli -h xxx -p 6379 -a $(cat ./pwd) --eval mem.lua > mem_result.txt\r\ncat mem_result.txt |awk -F ':' '{print $1 $2 $NF}'|uniq -c | sort -nr > redis.txt\r\n```\r\n\r\n\u3002", "top": 0, "createdAt": 1721041105, "style": "", "script": "<script defer src=\"http://ssh.witter.top:10012/script.js\" data-website-id=\"b891c729-62b4-46cb-bdca-d622dc706106\"></script>", "head": "", "ogImage": "https://img.witter.top/file/b037878209903b7d5bb17.jpg", "createdDate": "2024-07-15", "dateLabelColor": "#bc4c00"}, "P26": {"htmlDir": "docs/post/Kubernetes-ji-qun-&-zheng-shu-sheng-ji.html", "labels": ["Linux", "K8S"], "postTitle": "Kubernetes\u96c6\u7fa4&\u8bc1\u4e66\u5347\u7ea7", "postUrl": "post/Kubernetes-ji-qun-%26-zheng-shu-sheng-ji.html", "postSourceUrl": "https://github.com/ljwtorch/ljwtorch.github.io/issues/26", "commentNum": 0, "wordCount": 12034, "description": "\r\n### \u96c6\u7fa4\u5347\u7ea7\r\n\r\n> **[\u5b98\u7f51\u5347\u7ea7\u6b65\u9aa4](https://kubernetes.io/docs/tasks/administer-cluster/kubeadm/kubeadm-upgrade/)\uff0c\u6ce8\u610f\u9605\u8bfb\u5347\u7ea7\u8bf4\u660e**\r\n\r\n#### 1.\u66f4\u6539\u6240\u6709\u4e3b\u673a\u8f6f\u4ef6\u5305\u5b58\u50a8\u5e93\u5730\u5740\r\n\r\n> \u8fd9\u91cc\u4f7f\u7528\u7684\u662f[\u6e05\u534e\u955c\u50cf\u6e90\u5730\u5740](https://mirrors.tuna.tsinghua.edu.cn/help/kubernetes/)\uff0c\u5bbf\u4e3b\u673a\u4f7f\u7528\u7684\u5305\u7ba1\u7406\u5668\u4e3aapt\uff0c\u5728\u4ee5\u4e0b URL \u4e2d\uff0c\u6240\u6709\u4ed3\u5e93\u7684\u516c\u94a5\u5747\u76f8\u540c\uff0c\u53ea\u9700\u8981\u5c06\u4ed3\u5e93\u5730\u5740\u4e2d\u7684 `v1.28` \u4fee\u6539\u4e3a\u6240\u9700\u7684\u7248\u672c\r\n\r\n```shell\r\ncurl -fsSL https://pkgs.k8s.io/core:/stable:/v1.28/deb/Release.key | gpg --dearmor -o /etc/apt/keyrings/kubernetes-apt-keyring.gpg\r\n\r\nvim /etc/apt/sources.list.d/kubernetes.list\r\ndeb [signed-by=/etc/apt/keyrings/kubernetes-apt-keyring.gpg] https://mirrors.tuna.tsinghua.edu.cn/kubernetes/core:/stable:/v1.27/deb/ /\r\n# deb [signed-by=/etc/apt/keyrings/kubernetes-apt-keyring.gpg] https://mirrors.tuna.tsinghua.edu.cn/kubernetes/addons:/cri-o:/stable:/v1.27/deb/ /\r\n```\r\n\r\n#### 2.\u786e\u5b9a\u8981\u5347\u7ea7\u5230\u54ea\u4e2a\u7248\u672c\r\n\r\n```shell\r\n# Find the latest 1.30 version in the list.\r\n# It should look like 1.30.x-*, where x is the latest patch.\r\nsudo apt update\r\nsudo apt-cache madison kubeadm\r\n```\r\n\r\n#### 3.\u5347\u7ea7control-plane\u8282\u70b9\uff08kubeadm\uff09\r\n\r\n> \u8be5\u8282\u70b9\u5fc5\u987b\u5177\u6709`/etc/kubernetes/admin.conf`\u6587\u4ef6\uff0c**v1.28\u7248\u672c\u662f\u4e00\u4e2a\u5206\u754c\u70b9\uff0c\u4e4b\u524d\u7684\u7248\u672c\u4f1a\u7acb\u5373\u5347\u7ea7\u6240\u6709\u63d2\u4ef6\uff08\u5305\u62eccoredns\u548ckube-proxy\uff09\uff0c\u9700\u8981\u6ce8\u610f\u662f\u5426\u8fd8\u6709\u672a\u5347\u7ea7\u7684\u5176\u4ed6control-plane\u8282\u70b9**\r\n\r\n```shell\r\n# replace x in 1.30.x-* with the latest patch version\r\n# \u6b64\u65f6\u76ee\u6807\u5347\u7ea7\u81f3 v1.27.16 \u9700\u66ff\u6362\u4e0b\u9762\u7684\u7248\u672c\r\nsudo apt-mark unhold kubeadm && \\\r\nsudo apt-get update && sudo apt-get install -y kubeadm='1.30.x-*' && \\\r\nsudo apt-mark hold kubeadm\r\n\r\n# \u9a8c\u8bc1\u662f\u5426\u4e3a\u9884\u671f\u7248\u672c\r\nkubeadm version\r\n\r\n# \u9a8c\u8bc1\u5347\u7ea7\u8ba1\u5212\r\nkubeadm upgrade plan\r\n\t# \u4ee5\u4e0b\u4e3a\u8f93\u51fa\u5185\u5bb9\r\n[upgrade/config] Making sure the configuration is correct:\r\n[upgrade/config] Reading configuration from the cluster...\r\n[upgrade/config] FYI: You can look at this config file with 'kubectl -n kube-system get cm kubeadm-config -o yaml'\r\n[preflight] Running pre-flight checks.\r\n[upgrade] Running cluster health checks\r\n[upgrade] Fetching available versions to upgrade to\r\n[upgrade/versions] Cluster version: v1.27.7\r\n[upgrade/versions] kubeadm version: v1.27.16\r\nI0728 14:52:53.611082 1225480 version.go:256] remote version is much newer: v1.30.3; falling back to: stable-1.27\r\n[upgrade/versions] Target version: v1.27.16\r\n[upgrade/versions] Latest version in the v1.27 series: v1.27.16\r\n\r\nComponents that must be upgraded manually after you have upgraded the control plane with 'kubeadm upgrade apply':\r\nCOMPONENT   CURRENT       TARGET\r\nkubelet     2 x v1.27.4   v1.27.16\r\n\r\nUpgrade to the latest version in the v1.27 series:\r\n\r\nCOMPONENT                 CURRENT   TARGET\r\nkube-apiserver            v1.27.7   v1.27.16\r\nkube-controller-manager   v1.27.7   v1.27.16\r\nkube-scheduler            v1.27.7   v1.27.16\r\nkube-proxy                v1.27.7   v1.27.16\r\nCoreDNS                   v1.10.1   v1.10.1\r\netcd                      3.5.7-0   3.5.12-0\r\n\r\nYou can now apply the upgrade by executing the following command:\r\n\r\n        kubeadm upgrade apply v1.27.16\r\n\r\n_____________________________________________________________________\r\n\r\n\r\nThe table below shows the current state of component configs as understood by this version of kubeadm.\r\nConfigs that have a 'yes' mark in the 'MANUAL UPGRADE REQUIRED' column require manual config upgrade or\r\nresetting to kubeadm defaults before a successful upgrade can be performed. The version to manually\r\nupgrade to is denoted in the 'PREFERRED VERSION' column.\r\n\r\nAPI GROUP                 CURRENT VERSION   PREFERRED VERSION   MANUAL UPGRADE REQUIRED\r\nkubeproxy.config.k8s.io   v1alpha1          v1alpha1            no\r\nkubelet.config.k8s.io     v1beta1           v1beta1             no\r\n_____________________________________________________________________\r\n\r\n\r\n# \u6267\u884c\u5bf9\u5e94\u7684\u5347\u7ea7\u547d\u4ee4\r\nkubeadm upgrade apply v1.27.16\r\n\t# \u4ee5\u4e0b\u4e3a\u8f93\u51fa\u5185\u5bb9\r\n[upgrade/config] Making sure the configuration is correct:\r\n[upgrade/config] Reading configuration from the cluster...\r\n[upgrade/config] FYI: You can look at this config file with 'kubectl -n kube-system get cm kubeadm-config -o yaml'\r\n[preflight] Running pre-flight checks.\r\n[upgrade] Running cluster health checks\r\n[upgrade/version] You have chosen to change the cluster version to 'v1.27.16'\r\n[upgrade/versions] Cluster version: v1.27.7\r\n[upgrade/versions] kubeadm version: v1.27.16\r\n[upgrade] Are you sure you want to proceed? [y/N]: y\r\n[upgrade/prepull] Pulling images required for setting up a Kubernetes cluster\r\n[upgrade/prepull] This might take a minute or two, depending on the speed of your internet connection\r\n[upgrade/prepull] You can also perform this action in beforehand using 'kubeadm config images pull'\r\nW0728 14:54:24.900816 1226355 checks.go:835] detected that the sandbox image 'registry.aliyuncs.com/google_containers/pause:3.6' of the container runtime is inconsistent with that used by kubeadm. It is recommended that using 'registry.aliyuncs.com/google_containers/pause:3.9' as the CRI sandbox image.\r\n[upgrade/apply] Upgrading your Static Pod-hosted control plane to version 'v1.27.16' (timeout: 5m0s)...\r\n[upgrade/etcd] Upgrading to TLS for etcd\r\n[upgrade/staticpods] Preparing for 'etcd' upgrade\r\n[upgrade/staticpods] Renewing etcd-server certificate\r\n[upgrade/staticpods] Renewing etcd-peer certificate\r\n[upgrade/staticpods] Renewing etcd-healthcheck-client certificate\r\n[upgrade/staticpods] Moved new manifest to '/etc/kubernetes/manifests/etcd.yaml' and backed up old manifest to '/etc/kubernetes/tmp/kubeadm-backup-manifests-2024-07-28-14-54-44/etcd.yaml'\r\n[upgrade/staticpods] Waiting for the kubelet to restart the component\r\n[upgrade/staticpods] This might take a minute or longer depending on the component/version gap (timeout 5m0s)\r\n[apiclient] Found 1 Pods for label selector component=etcd\r\n[upgrade/staticpods] Component 'etcd' upgraded successfully!\r\n[upgrade/etcd] Waiting for etcd to become available\r\n[upgrade/staticpods] Writing new Static Pod manifests to '/etc/kubernetes/tmp/kubeadm-upgraded-manifests97929804'\r\n[upgrade/staticpods] Preparing for 'kube-apiserver' upgrade\r\n[upgrade/staticpods] Renewing apiserver certificate\r\n[upgrade/staticpods] Renewing apiserver-kubelet-client certificate\r\n[upgrade/staticpods] Renewing front-proxy-client certificate\r\n[upgrade/staticpods] Renewing apiserver-etcd-client certificate\r\n[upgrade/staticpods] Moved new manifest to '/etc/kubernetes/manifests/kube-apiserver.yaml' and backed up old manifest to '/etc/kubernetes/tmp/kubeadm-backup-manifests-2024-07-28-14-54-44/kube-apiserver.yaml'\r\n[upgrade/staticpods] Waiting for the kubelet to restart the component\r\n[upgrade/staticpods] This might take a minute or longer depending on the component/version gap (timeout 5m0s)\r\n[apiclient] Found 1 Pods for label selector component=kube-apiserver\r\n[upgrade/staticpods] Component 'kube-apiserver' upgraded successfully!\r\n[upgrade/staticpods] Preparing for 'kube-controller-manager' upgrade\r\n[upgrade/staticpods] Renewing controller-manager.conf certificate\r\n[upgrade/staticpods] Moved new manifest to '/etc/kubernetes/manifests/kube-controller-manager.yaml' and backed up old manifest to '/etc/kubernetes/tmp/kubeadm-backup-manifests-2024-07-28-14-54-44/kube-controller-manager.yaml'\r\n[upgrade/staticpods] Waiting for the kubelet to restart the component\r\n[upgrade/staticpods] This might take a minute or longer depending on the component/version gap (timeout 5m0s)\r\n[apiclient] Found 1 Pods for label selector component=kube-controller-manager\r\n[upgrade/staticpods] Component 'kube-controller-manager' upgraded successfully!\r\n[upgrade/staticpods] Preparing for 'kube-scheduler' upgrade\r\n[upgrade/staticpods] Renewing scheduler.conf certificate\r\n[upgrade/staticpods] Moved new manifest to '/etc/kubernetes/manifests/kube-scheduler.yaml' and backed up old manifest to '/etc/kubernetes/tmp/kubeadm-backup-manifests-2024-07-28-14-54-44/kube-scheduler.yaml'\r\n[upgrade/staticpods] Waiting for the kubelet to restart the component\r\n[upgrade/staticpods] This might take a minute or longer depending on the component/version gap (timeout 5m0s)\r\n[apiclient] Found 1 Pods for label selector component=kube-scheduler\r\n[upgrade/staticpods] Component 'kube-scheduler' upgraded successfully!\r\n[upload-config] Storing the configuration used in ConfigMap 'kubeadm-config' in the 'kube-system' Namespace\r\n[kubelet] Creating a ConfigMap 'kubelet-config' in namespace kube-system with the configuration for the kubelets in the cluster\r\n[upgrade] Backing up kubelet config file to /etc/kubernetes/tmp/kubeadm-kubelet-config2956970837/config.yaml\r\n[kubelet-start] Writing kubelet configuration to file '/var/lib/kubelet/config.yaml'\r\n[bootstrap-token] Configured RBAC rules to allow Node Bootstrap tokens to get nodes\r\n[bootstrap-token] Configured RBAC rules to allow Node Bootstrap tokens to post CSRs in order for nodes to get long term certificate credentials\r\n[bootstrap-token] Configured RBAC rules to allow the csrapprover controller automatically approve CSRs from a Node Bootstrap Token\r\n[bootstrap-token] Configured RBAC rules to allow certificate rotation for all node client certificates in the cluster\r\n[addons] Applied essential addon: CoreDNS\r\n[addons] Applied essential addon: kube-proxy\r\n\r\n[upgrade/successful] SUCCESS! Your cluster was upgraded to 'v1.27.16'. Enjoy!\r\n\r\n[upgrade/kubelet] Now that your control plane is upgraded, please proceed with upgrading your kubelets if you haven't already done so.\r\n\r\n# \u5347\u7ea7CNI\u9a71\u52a8\u63d2\u4ef6\uff0c\u6b64\u65f6\u4f7f\u7528\u7684\u662fflannel\uff0c\u65e0\u9700\u5347\u7ea7\u5373\u53ef\u517c\u5bb9\uff1b\u5e76\u4e14CNI\u9a71\u52a8\u4f5c\u4e3aDS\u8fd0\u884c\uff0c\u65e0\u9700\u5728\u5176\u4ed6\u63a7\u5236\u5e73\u9762\u8282\u70b9\u4e0a\u6267\u884c\u6b64\u6b65\u9aa4\r\n# \u5982\u679c\u6709\u5176\u4ed6\u63a7\u5236\u5e73\u9762\u8282\u70b9\uff0c\u9700\u8981\u6267\u884c\r\nsudo kubeadm upgrade node\r\n```\r\n\r\n#### 4.\u5347\u7ea7control-plane\u8282\u70b9\uff08kubelet & kubectl\uff09\r\n\r\n```shell\r\n# \u817e\u7a7a\u8be5\u8282\u70b9 xxx \u4e3a\u63a7\u5236\u5e73\u9762\u7684\u8282\u70b9\u540d\u79f0\r\nkubectl drain xxx --ignore-daemonsets\r\n\t# \u4e0b\u9762\u4e3a\u8f93\u51fa\u5185\u5bb9 \u7701\u7565\u4e86\u4e0d\u5173\u952e\u7684\u8f93\u51fa\u5185\u5bb9\r\nnode/xxx already cordoned\r\nWarning: ignoring DaemonSet-managed Pods: kube-flannel/kube-flannel-ds-mkn4j, kube-system/kube-proxy-8mf4k, loggie/loggie-tzxtz\r\nevicting pod xxx\r\n\r\n.....\r\n\r\npod/xxx evicted\r\nnode/xxx drained\r\n\r\n# \u5347\u7ea7kubectl\u548ckubelet\r\n# \u7528\u6700\u65b0\u7684\u8865\u4e01\u7248\u672c\u66ff\u6362 1.30.x-* \u4e2d\u7684 x\r\nsudo apt-mark unhold kubelet kubectl && \\\r\nsudo apt-get update && sudo apt-get install -y kubelet='1.30.x-*' kubectl='1.30.x-*' && \\\r\nsudo apt-mark hold kubelet kubectl\r\n# \u91cd\u542f\r\nsudo systemctl daemon-reload\r\nsudo systemctl restart kubelet\r\n# \u89e3\u9664\u8282\u70b9\u4fdd\u62a4\r\n# \u5c06 <node-to-uncordon> \u66ff\u6362\u4e3a\u4f60\u7684\u8282\u70b9\u540d\u79f0\r\nkubectl uncordon <node-to-uncordon>\r\n```\r\n\r\n#### 5.\u5347\u7ea7\u5de5\u4f5c\u8282\u70b9\r\n\r\n```shell\r\n# \u5c06 1.30.x-* \u4e2d\u7684 x \u66ff\u6362\u4e3a\u6700\u65b0\u7684\u8865\u4e01\u7248\u672c\r\nsudo apt-mark unhold kubeadm && \\\r\nsudo apt-get update && sudo apt-get install -y kubeadm='1.30.x-*' && \\\r\nsudo apt-mark hold kubeadm\r\nsudo kubeadm upgrade node\r\n# \u817e\u7a7a\u8282\u70b9\r\nkubectl drain xxx --ignore-daemonsets\r\n# \u91cd\u542f\r\nsudo systemctl daemon-reload\r\nsudo systemctl restart kubelet\r\n# \u5728\u63a7\u5236\u5e73\u9762\u8282\u70b9\u4e0a\u6267\u884c\u6b64\u547d\u4ee4\r\n# \u5c06 <node-to-uncordon> \u66ff\u6362\u4e3a\u4f60\u7684\u8282\u70b9\u540d\u79f0\r\nkubectl uncordon <node-to-uncordon>\r\n```\r\n\r\n\r\n\r\n### \u8bc1\u4e66\u624b\u52a8\u66f4\u65b0\r\n\r\n> **[\u5b98\u7f51\u5347\u7ea7\u6b65\u9aa4](https://kubernetes.io/docs/tasks/administer-cluster/kubeadm/kubeadm-certs/#manual-preparation-of-component-credentials)\uff0c\u9700\u8981\u67e5\u770b\u6587\u6863\u4e2d\u7684\u8b66\u544a\u548c\u7b14\u8bb0**\uff0c\u5f53\u96c6\u7fa4\u5347\u7ea7\u540e\uff0c\u8bc1\u4e66\u4f1a\u81ea\u884c\u66f4\u65b0\r\n\r\n#### 1.\u68c0\u67e5\u8bc1\u4e66\u662f\u5426\u8fc7\u671f\r\n\r\n```shell\r\nkubeadm certs check-expiration\r\n```\r\n\r\n#### 2.\u7eed\u8ba2\u8bc1\u4e66\r\n\r\n```shell\r\nkubeadm certs renew all\r\nsudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config\r\nsudo chown $(id -u):$(id -g) $HOME/.kube/config\r\n```\r\n\r\n#### 3.\u5f53kubelet\u5ba2\u6237\u7aef\u8bc1\u4e66\u8f6e\u6362\u5931\u8d25\r\n\r\n> kube-apiserver\u62a5\u9519 `x509: certificate has expired or is not yet valid`\r\n\r\n```shell\r\n# \u4ece\u6545\u969c\u8282\u70b9\u5907\u4efd\u548c\u5220\u9664 /etc/kubernetes/kubelet.conf \u548c /var/lib/kubelet/pki/kubelet-client*\r\n# \u5728\u96c6\u7fa4\u4e2d\u5177\u6709 /etc/kubernetes/pki/ca.key \u7684\u6b63\u5e38\u5de5\u4f5c\u7684\u63a7\u5236\u5e73\u9762\u8282\u70b9\u4e0a\u6267\u884c($NODE\u4e3a\u6545\u969c\u8282\u70b9\u7684\u540d\u79f0)\r\nkubeadm kubeconfig user --org system:nodes --client-name system:node:$NODE > kubelet.conf\r\n# \u590d\u5236\u751f\u6210\u7684kubelet.conf\u5230/etc/kubernetes/kubelet.conf\r\n# \u5728\u6545\u969c\u8282\u70b9\u4e0a\u6267\u884c\u540e\uff0c/var/lib/kubelet/pki/kubelet-client-current.pem\u4f1a\u91cd\u65b0\u521b\u5efa\r\nsystemctl restart kubelet\r\n# \u624b\u52a8\u7f16\u8f91/etc/kubernetes/kubelet.conf \u5c06\u751f\u6210\u7684 client-certificate-data \u548c client-key-data \u66ff\u6362\u4e3a\uff1a\r\nclient-certificate: /var/lib/kubelet/pki/kubelet-client-current.pem\r\nclient-key: /var/lib/kubelet/pki/kubelet-client-current.pem\r\n# \u91cd\u65b0\u542f\u52a8kubelet\r\nsystemctl restart kubelet\r\n```\r\n\r\n#### 4.\u66f4\u65b0\u540e\u5904\u7406\r\n\r\n```shell\r\n# \u91cd\u5efa apiserver etcd controller-manager scheduler\r\nkubectl -n kube-system delete po etcd-xxx kube-apiserver-xxx kube-controller-manager-xxx kube-scheduler-xxx\r\n# \u67e5\u770b\u5bf9\u5e94pod\u65e5\u5fd7\uff0c\u5982\u679c\u4ecd\u7136\u62a5\u9519\uff1ax509: certificate has expired or is not yet valid\uff0c\u5219\uff1a\r\n# \u4e34\u65f6\u5c06\u6e05\u5355\u6587\u4ef6\u4ece /etc/kubernetes/manifests/ \u79fb\u9664\u5e76\u7b49\u5f85 20 \u79d2\uff0c\u5e76\u518d\u6b21\u91cd\u5efapod\r\n# \u4e4b\u540e\u4f60\u53ef\u4ee5\u5c06\u6587\u4ef6\u79fb\u56de\u53bb\uff0ckubelet \u53ef\u4ee5\u5b8c\u6210 Pod \u7684\u91cd\u5efa\uff0c\u800c\u7ec4\u4ef6\u7684\u8bc1\u4e66\u66f4\u65b0\u64cd\u4f5c\u4e5f\u5f97\u4ee5\u5b8c\u6210\r\n```\r\n\r\n\r\n\r\n\u3002", "top": 0, "createdAt": 1722223125, "style": "", "script": "<script defer src=\"http://ssh.witter.top:10012/script.js\" data-website-id=\"b891c729-62b4-46cb-bdca-d622dc706106\"></script>", "head": "", "ogImage": "https://img.witter.top/file/b037878209903b7d5bb17.jpg", "createdDate": "2024-07-29", "dateLabelColor": "#bc4c00"}, "P27": {"htmlDir": "docs/post/Nginx-error accept4() failed (24- Too many open files) -wen-ti.html", "labels": ["Linux"], "postTitle": "Nginx-error accept4() failed (24: Too many open files) \u95ee\u9898", "postUrl": "post/Nginx-error%20accept4%28%29%20failed%20%2824-%20Too%20many%20open%20files%29%20-wen-ti.html", "postSourceUrl": "https://github.com/ljwtorch/ljwtorch.github.io/issues/27", "commentNum": 0, "wordCount": 2615, "description": "**\u7f51\u7edc\u7ed3\u6784\uff1a** \u516c\u7f51->Nginx->\u540e\u7aefwebsocket\u670d\u52a1\r\n\r\n**\u62a5\u9519\u65e5\u5fd7\uff1a**`2024/07/24 14:03:08 [crit] 708160#0: accept4() failed (24: Too many open files)`\r\n\r\n**\u89e3\u51b3\u65b9\u6cd5\uff1a**\r\n\r\n1. **\u67e5\u770b\u9650\u5236\u6570\u91cf**\r\n\r\n   ```shell\r\n   # \u4e0b\u9762\u5df2\u7ecf\u662f\u4fee\u6539\u8fc7\u7684\u914d\u7f6e\r\n   ulimit -a\r\n   real-time non-blocking time  (microseconds, -R) unlimited\r\n   core file size              (blocks, -c) 0\r\n   data seg size               (kbytes, -d) unlimited\r\n   scheduling priority                 (-e) 0\r\n   file size                   (blocks, -f) unlimited\r\n   pending signals                     (-i) 30297\r\n   max locked memory           (kbytes, -l) 974046\r\n   max memory size             (kbytes, -m) unlimited\r\n   open files                          (-n) 65535    # \u4e3b\u8981\u770b\u8fd9\u91cc\u6253\u5f00\u7684\u53e5\u67c4\u6570\u91cf\u4e0a\u9650(\u6587\u4ef6\u6570)\r\n   pipe size                (512 bytes, -p) 8\r\n   POSIX message queues         (bytes, -q) 819200\r\n   real-time priority                  (-r) 0\r\n   stack size                  (kbytes, -s) 8192\r\n   cpu time                   (seconds, -t) unlimited\r\n   max user processes                  (-u) 30297\r\n   virtual memory              (kbytes, -v) unlimited\r\n   file locks                          (-x) unlimited\r\n   ```\r\n\r\n2. **\u67e5\u770b\u5f53\u524d\u7cfb\u7edf\u7684\u8fde\u63a5\u6570\u91cf**\r\n\r\n   > 1. **TIME_WAIT**\uff1a\u8868\u793a\u8fde\u63a5\u5df2\u7ecf\u5173\u95ed\uff0c\u4f46TCP\u8fd8\u6ca1\u6709\u5b8c\u5168\u5220\u9664\u8fde\u63a5\uff0c\u56e0\u4e3a\u9700\u8981\u786e\u4fdd\u6240\u6709\u6570\u636e\u5305\u90fd\u5df2\u7ecf\u88ab\u6b63\u786e\u63a5\u6536\u548c\u5904\u7406\u3002", "top": 0, "createdAt": 1722320527, "style": "", "script": "<script defer src=\"http://ssh.witter.top:10012/script.js\" data-website-id=\"b891c729-62b4-46cb-bdca-d622dc706106\"></script>", "head": "", "ogImage": "https://img.witter.top/file/b037878209903b7d5bb17.jpg", "createdDate": "2024-07-30", "dateLabelColor": "#bc4c00"}, "P28": {"htmlDir": "docs/post/Linux-bu-fen-service-de-zuo-yong.html", "labels": ["Linux"], "postTitle": "Linux\u90e8\u5206service\u7684\u4f5c\u7528", "postUrl": "post/Linux-bu-fen-service-de-zuo-yong.html", "postSourceUrl": "https://github.com/ljwtorch/ljwtorch.github.io/issues/28", "commentNum": 0, "wordCount": 908, "description": "\u200b\t1.\t**chrony.service**\uff1a\u7528\u4e8e\u540c\u6b65\u7cfb\u7edf\u65f6\u95f4\uff0c\u901a\u5e38\u4e0e NTP\uff08\u7f51\u7edc\u65f6\u95f4\u534f\u8bae\uff09\u670d\u52a1\u5668\u901a\u4fe1\uff0c\u4ee5\u786e\u4fdd\u7cfb\u7edf\u65f6\u949f\u7684\u51c6\u786e\u6027\u3002", "top": 0, "createdAt": 1724305837, "style": "", "script": "<script defer src=\"http://ssh.witter.top:10012/script.js\" data-website-id=\"b891c729-62b4-46cb-bdca-d622dc706106\"></script>", "head": "", "ogImage": "https://img.witter.top/file/b037878209903b7d5bb17.jpg", "createdDate": "2024-08-22", "dateLabelColor": "#bc4c00"}}, "singeListJson": {"P14": {"htmlDir": "docs/link.html", "labels": ["link"], "postTitle": "\u81ea\u5b58\u94fe\u63a5", "postUrl": "link.html", "postSourceUrl": "https://github.com/ljwtorch/ljwtorch.github.io/issues/14", "commentNum": 0, "wordCount": 1269, "description": "- [\u56fe\u5e8a](https://www.3mz.cloudns.ch)\r\n- [\u77ed\u94fe](https://surl.witter.top)\r\n- [\u76d1\u63a7](https://monit.witter.top)\r\n- [docker\u955c\u50cf\u6e90](https://docker.3mz.cloudns.ch/)\r\n- [\u4e11\u4e11\u5934\u50cf\u751f\u6210\u5668](https://txstc55.github.io/ugly-avatar)\r\n- [People Die, but Long Live GitHub](https://laike9m.com/blog/people-die-but-long-live-github,122/)\r\n- [Pikimov | \u7f51\u9875\u7248 AE](https://pikimov.com/)\r\n- [Dropbase | Prompt \u548c Python \u5f00\u53d1 Web \u5e94\u7528\u5de5\u5177](https://github.com/DropbaseHQ/dropbase)\r\n- [Logdy | \u4fbf\u6377\u65e5\u5fd7\u67e5\u770b\u5de5\u5177](https://logdy.dev/)\r\n- [Pezzo | \u5f00\u6e90 LLMOps \u5e73\u53f0](https://github.com/pezzolabs/pezzo)\r\n- [WASM \u89c6\u9891\u5904\u7406\u5de5\u5177](https://www.videozip.online/)\r\n- [\u624b\u5199\u4f53\u6587\u7a3f\u751f\u6210\u5668](https://vtool.pro/handwriting/index.html)\r\n- [\u7ec4\u5efa\u81ea\u5df1\u7684 AI \u96c6\u7fa4](https://github.com/exo-explore/exo)\r\n\r\n<span id='busuanzi'>:robot:\u611f\u8c22\u7b2c<span></span>\u5c0f\u4f19\u4f34\u7684<span></span>\u6b21\u8bbf\u95ee\u6b64\u9875\u9762\u3002", "top": 0, "createdAt": 1718951757, "style": "<style>#busuanzi_value_site_uv{color:red}#busuanzi_value_site_pv{color:red}</style>", "script": "<script defer src=\"http://ssh.witter.top:10012/script.js\" data-website-id=\"b891c729-62b4-46cb-bdca-d622dc706106\"></script><script>document.getElementById('user-content-busuanzi').id='busuanzi_container_site_uv';busuanzi=document.getElementById('busuanzi_container_site_uv');busuanzi.style.display='none';busuanzi.childNodes[1].id='busuanzi_value_site_uv';busuanzi.childNodes[3].id='busuanzi_value_site_pv';</script><script async src='//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js'></script>", "head": "", "ogImage": "https://img.witter.top/file/b037878209903b7d5bb17.jpg", "createdDate": "2024-06-21", "dateLabelColor": "#bc4c00"}, "P12": {"htmlDir": "docs/about.html", "labels": ["about"], "postTitle": "About", "postUrl": "about.html", "postSourceUrl": "https://github.com/ljwtorch/ljwtorch.github.io/issues/12", "commentNum": 0, "wordCount": 615, "description": "- \u4eba\u53ef\u4ee5\u6ca1\u6709\u50b2\u6c14\uff0c\u4f46\u4e0d\u80fd\u6ca1\u6709\u50b2\u9aa8\uff1b\r\n- \u5174\u8da3\u662f\u5b66\u4e60\u6700\u597d\u7684\u8001\u5e08\uff1b\r\n\r\n\r\n<span id='busuanzi'>:robot:\u611f\u8c22\u7b2c<span></span>\u5c0f\u4f19\u4f34\u7684<span></span>\u6b21\u8bbf\u95ee\u6b64\u9875\u9762\u3002", "top": 0, "createdAt": 1718894582, "style": "<style>#busuanzi_value_site_uv{color:red}#busuanzi_value_site_pv{color:red}</style>", "script": "<script defer src=\"http://ssh.witter.top:10012/script.js\" data-website-id=\"b891c729-62b4-46cb-bdca-d622dc706106\"></script><script>document.getElementById('user-content-busuanzi').id='busuanzi_container_site_uv';busuanzi=document.getElementById('busuanzi_container_site_uv');busuanzi.style.display='none';busuanzi.childNodes[1].id='busuanzi_value_site_uv';busuanzi.childNodes[3].id='busuanzi_value_site_pv';</script><script async src='//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js'></script>", "head": "", "ogImage": "https://img.witter.top/file/b037878209903b7d5bb17.jpg", "createdDate": "2024-06-20", "dateLabelColor": "#bc4c00"}}, "labelColorDict": {"about": "#C5DEF5", "bug": "#d73a4a", "CI/CD": "#7E9219", "documentation": "#0075ca", "duplicate": "#cfd3d7", "enhancement": "#a2eeef", "good first issue": "#7057ff", "help wanted": "#008672", "invalid": "#e4e669", "K8S": "#DC4D91", "lang": "#F9D0C4", "link": "#D4C5F9", "Linux": "#EAD0F2", "question": "#d876e3", "wontfix": "#ffffff", "\u5927\u6570\u636e": "#497B40", "\u5bb9\u5668": "#A2719B", "\u6570\u636e\u5e93": "#E5B49F", "\u65e5\u5fd7": "#561A0A", "\u76d1\u63a7\u7cfb\u7edf": "#E99695", "\u7f51\u7edc": "#9AC9A2", "\u8bc1\u4e66": "#687BF6"}, "displayTitle": "V's Blog", "faviconUrl": "https://img.witter.top/file/b037878209903b7d5bb17.jpg", "ogImage": "https://img.witter.top/file/b037878209903b7d5bb17.jpg", "primerCSS": "<link href='https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/Primer/21.0.7/primer.css' rel='stylesheet' />", "prevUrl": "/index.html", "nextUrl": "disabled"}